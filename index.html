<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aunix Studio Pro - Enhanced Authentication</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Cyber Blue Theme - Vibrant */
            --primary-bg: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
            --secondary-bg: rgba(0, 212, 255, 0.1);
            --accent-primary: #00d4ff;
            --accent-secondary: #ff6b6b;
            --accent-gold: #ffd700;
            --text-primary: #ffffff;
            --text-secondary: #b8c5d6;
            --text-muted: #6b7280;
            --border-color: rgba(0, 212, 255, 0.4);
            --card-bg: rgba(0, 212, 255, 0.08);
            --input-bg: rgba(0, 212, 255, 0.12);
            --button-primary: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            --button-secondary: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            --button-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --button-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            --button-google: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
            --shadow-soft: 0 4px 20px rgba(0, 212, 255, 0.2);
            --shadow-strong: 0 8px 40px rgba(0, 212, 255, 0.3);
            --border-radius: 16px;
            --border-radius-small: 8px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --error-color: #ef4444;
            --success-color: #10b981;
            --warning-color: #f59e0b;
        }

        /* Neon Purple Theme */
        .theme-neon-purple {
            --primary-bg: linear-gradient(135deg, #0f0a1a 0%, #1a0f2e 50%, #2e1a3e 100%);
            --secondary-bg: rgba(147, 51, 234, 0.15);
            --accent-primary: #9333ea;
            --accent-secondary: #ec4899;
            --border-color: rgba(147, 51, 234, 0.5);
            --card-bg: rgba(147, 51, 234, 0.1);
            --input-bg: rgba(147, 51, 234, 0.15);
            --button-primary: linear-gradient(135deg, #9333ea 0%, #7c3aed 100%);
            --shadow-soft: 0 4px 20px rgba(147, 51, 234, 0.25);
            --shadow-strong: 0 8px 40px rgba(147, 51, 234, 0.4);
        }

        /* Electric Green Theme */
        .theme-electric-green {
            --primary-bg: linear-gradient(135deg, #0a1a0f 0%, #0f2e1a 50%, #1a3e2e 100%);
            --secondary-bg: rgba(34, 197, 94, 0.15);
            --accent-primary: #22c55e;
            --accent-secondary: #10b981;
            --border-color: rgba(34, 197, 94, 0.5);
            --card-bg: rgba(34, 197, 94, 0.1);
            --input-bg: rgba(34, 197, 94, 0.15);
            --button-primary: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            --shadow-soft: 0 4px 20px rgba(34, 197, 94, 0.25);
            --shadow-strong: 0 8px 40px rgba(34, 197, 94, 0.4);
        }

        /* Fire Orange Theme */
        .theme-fire-orange {
            --primary-bg: linear-gradient(135deg, #1a0f0a 0%, #2e1a0f 50%, #3e2e1a 100%);
            --secondary-bg: rgba(249, 115, 22, 0.15);
            --accent-primary: #f97316;
            --accent-secondary: #ea580c;
            --border-color: rgba(249, 115, 22, 0.5);
            --card-bg: rgba(249, 115, 22, 0.1);
            --input-bg: rgba(249, 115, 22, 0.15);
            --button-primary: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            --shadow-soft: 0 4px 20px rgba(249, 115, 22, 0.25);
            --shadow-strong: 0 8px 40px rgba(249, 115, 22, 0.4);
        }

        /* Golden Luxury Theme */
        .theme-golden-luxury {
            --primary-bg: linear-gradient(135deg, #1a1a0a 0%, #2e2e1a 50%, #3e3e2e 100%);
            --secondary-bg: rgba(251, 191, 36, 0.15);
            --accent-primary: #fbbf24;
            --accent-secondary: #f59e0b;
            --border-color: rgba(251, 191, 36, 0.5);
            --card-bg: rgba(251, 191, 36, 0.1);
            --input-bg: rgba(251, 191, 36, 0.15);
            --button-primary: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            --shadow-soft: 0 4px 20px rgba(251, 191, 36, 0.25);
            --shadow-strong: 0 8px 40px rgba(251, 191, 36, 0.4);
        }

        /* Rose Pink Theme */
        .theme-rose-pink {
            --primary-bg: linear-gradient(135deg, #1a0a1a 0%, #2e1a2e 50%, #3e2e3e 100%);
            --secondary-bg: rgba(244, 63, 94, 0.15);
            --accent-primary: #f43f5e;
            --accent-secondary: #ec4899;
            --border-color: rgba(244, 63, 94, 0.5);
            --card-bg: rgba(244, 63, 94, 0.1);
            --input-bg: rgba(244, 63, 94, 0.15);
            --button-primary: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%);
            --shadow-soft: 0 4px 20px rgba(244, 63, 94, 0.25);
            --shadow-strong: 0 8px 40px rgba(244, 63, 94, 0.4);
        }

        /* Ocean Teal Theme */
        .theme-ocean-teal {
            --primary-bg: linear-gradient(135deg, #0a1a1a 0%, #1a2e2e 50%, #2e3e3e 100%);
            --secondary-bg: rgba(20, 184, 166, 0.15);
            --accent-primary: #14b8a6;
            --accent-secondary: #0d9488;
            --border-color: rgba(20, 184, 166, 0.5);
            --card-bg: rgba(20, 184, 166, 0.1);
            --input-bg: rgba(20, 184, 166, 0.15);
            --button-primary: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            --shadow-soft: 0 4px 20px rgba(20, 184, 166, 0.25);
            --shadow-strong: 0 8px 40px rgba(20, 184, 166, 0.4);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-soft);
        }

        .menu-btn {
            background: none;
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            font-size: 24px;
            cursor: pointer;
            padding: 12px;
            border-radius: var(--border-radius-small);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: var(--accent-primary);
            border-radius: 50%;
            transition: var(--transition);
            transform: translate(-50%, -50%);
            z-index: -1;
        }

        .menu-btn:hover::before {
            width: 100px;
            height: 100px;
        }

        .menu-btn:hover {
            color: #000;
            transform: scale(1.05);
            border-color: var(--accent-primary);
        }

        .logo {
            font-size: 22px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .theme-selector {
            position: relative;
        }

        .theme-dropdown {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 12px 20px;
            color: var(--text-primary);
            font-size: 16px;
            cursor: pointer;
            backdrop-filter: blur(20px);
            transition: var(--transition);
            min-width: 200px;
            font-weight: 600;
        }

        .theme-dropdown:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-strong);
            transform: translateY(-2px);
        }

        /* User Info in Header */
        .user-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--secondary-bg);
            padding: 8px 16px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--accent-primary);
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: -320px;
            top: 0;
            width: 320px;
            height: 100vh;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-right: 2px solid var(--border-color);
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1001;
            padding: 100px 0 20px 0;
            box-shadow: var(--shadow-strong);
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 18px 30px;
            color: var(--text-primary);
            text-decoration: none;
            transition: var(--transition);
            border-left: 4px solid transparent;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            font-size: 16px;
        }

        .sidebar-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            transition: var(--transition);
            z-index: -1;
        }

        .sidebar-item:hover::before {
            width: 100%;
        }

        .sidebar-item:hover {
            color: #000;
            border-left-color: var(--accent-primary);
            transform: translateX(12px);
        }

        /* Main Content */
        .main-content {
            padding: 30px 24px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-soft);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: var(--shadow-strong);
            border-color: var(--accent-primary);
        }

        .card-title {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: var(--text-primary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 18px 24px;
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 16px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            font-family: inherit;
            font-weight: 500;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            transform: translateY(-3px);
            box-shadow: var(--shadow-strong);
            background: var(--card-bg);
        }

        .form-input.error {
            border-color: var(--error-color);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .form-input.success {
            border-color: var(--success-color);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Error and Success Messages */
        .message {
            padding: 12px 16px;
            border-radius: var(--border-radius-small);
            margin-top: 8px;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .message.error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error-color);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .message.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .message.warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        /* Buttons */
        .btn {
            border: none;
            border-radius: var(--border-radius);
            padding: 18px 36px;
            color: white;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-shadow: var(--shadow-soft);
            gap: 8px;
            min-height: 54px;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-4px) scale(1.03);
            box-shadow: var(--shadow-strong);
        }

        .btn:active:not(:disabled) {
            transform: translateY(-2px) scale(1.01);
        }

        .btn-primary {
            background: var(--button-primary);
        }

        .btn-secondary {
            background: var(--button-secondary);
        }

        .btn-success {
            background: var(--button-success);
        }

        .btn-warning {
            background: var(--button-warning);
        }

        .btn-google {
            background: var(--button-google);
        }

        .btn-small {
            padding: 12px 24px;
            font-size: 14px;
            min-height: 40px;
        }

        .btn-full-width {
            width: 100%;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent-primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Authentication Styles */
        .auth-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .auth-tabs {
            display: flex;
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: 4px;
            margin-bottom: 24px;
            border: 2px solid var(--border-color);
        }

        .auth-tab {
            flex: 1;
            padding: 12px 24px;
            text-align: center;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border-radius: var(--border-radius-small);
        }

        .auth-tab.active {
            background: var(--accent-primary);
            color: #000;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: fadeInUp 0.3s ease-out;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 24px 0;
            text-align: center;
            color: var(--text-muted);
            font-weight: 600;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border-color);
        }

        .divider span {
            padding: 0 16px;
            background: var(--card-bg);
        }

        .password-requirements {
            background: var(--secondary-bg);
            border-radius: var(--border-radius-small);
            padding: 16px;
            margin-top: 8px;
            border: 1px solid var(--border-color);
        }

        .password-requirement {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            margin-bottom: 4px;
            color: var(--text-muted);
        }

        .password-requirement.valid {
            color: var(--success-color);
        }

        .password-requirement.invalid {
            color: var(--error-color);
        }

        .forgot-password-link {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            display: inline-block;
            margin-top: 8px;
            transition: var(--transition);
        }

        .forgot-password-link:hover {
            text-decoration: underline;
            transform: translateX(4px);
        }

        /* User Profile Styles */
        .user-profile {
            display: none;
        }

        .user-profile.active {
            display: block;
            animation: fadeInUp 0.3s ease-out;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 32px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid var(--accent-primary);
            object-fit: cover;
        }

        .profile-info h3 {
            color: var(--text-primary);
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .profile-info p {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--secondary-bg);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            color: var(--accent-primary);
            margin-bottom: 4px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Grid */
        .grid {
            display: grid;
            gap: 24px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 16px 24px;
            color: var(--text-primary);
            font-weight: 600;
            z-index: 10000;
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-strong);
            animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 400px;
            min-width: 300px;
        }

        .toast.success {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .toast.error {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .toast.warning {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        @keyframes slideInRight {
            from { 
                transform: translateX(100%); 
                opacity: 0; 
            }
            to { 
                transform: translateX(0); 
                opacity: 1; 
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 16px;
            }

            .main-content {
                padding: 20px 16px;
            }

            .card {
                padding: 24px;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }

            .sidebar {
                width: 280px;
                left: -280px;
            }

            .toast {
                right: 10px;
                left: 10px;
                max-width: none;
                min-width: auto;
            }

            .auth-tabs {
                flex-direction: column;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .profile-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            backdrop-filter: blur(10px);
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Hide number input arrows */
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>

    <!-- Firebase SDK v9 (modular) -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js';
        import { 
            getAuth, 
            signInWithPopup, 
            GoogleAuthProvider, 
            createUserWithEmailAndPassword, 
            signInWithEmailAndPassword, 
            signOut, 
            onAuthStateChanged,
            sendPasswordResetEmail,
            updateProfile
        } from 'https://www.gstatic.com/firebasejs/9.24.0/firebase-auth.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD_qoK04uYVUFT1fRX0dM8m8NUzhP0rZeo",
            authDomain: "aunix-studio.firebaseapp.com",
            projectId: "aunix-studio",
            storageBucket: "aunix-studio.firebasestorage.app",
            messagingSenderId: "160031030915",
            appId: "1:160031030915:web:c22575722a08bebf7fe5b6",
            measurementId: "G-CRK58J9P7K"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const googleProvider = new GoogleAuthProvider();

        // Make Firebase auth available globally
        window.firebaseAuth = {
            auth,
            googleProvider,
            signInWithPopup,
            GoogleAuthProvider,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            sendPasswordResetEmail,
            updateProfile
        };
    </script>
</head>
<body class="theme-default">
    <!-- Header -->
    <div class="header">
        <button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
        <div class="logo">Aunix Studio Pro</div>
        <div style="display: flex; align-items: center; gap: 16px;">
            <!-- User info will be inserted here when logged in -->
            <div id="userHeaderInfo" class="user-header-info" style="display: none;">
                <img id="userHeaderAvatar" class="user-avatar" src="" alt="User Avatar">
                <span id="userHeaderName" class="user-name"></span>
            </div>
            <div class="theme-selector">
                <select class="theme-dropdown" onchange="changeTheme(this.value)">
                    <option value="default">üî∑Ô∏è Cyber Blue</option>
                    <option value="neon-purple">üü£ Neon Purple</option>
                    <option value="electric-green">‚ö° Electric Green</option>
                    <option value="fire-orange">üî∂Ô∏è Fire Orange</option>
                    <option value="golden-luxury">‚ú® Golden Luxury</option>
                    <option value="rose-pink">üåπ Rose Pink</option>
                    <option value="ocean-teal">üåä Ocean Teal</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <a class="sidebar-item" href="#" onclick="showPage('home')">üè† Home</a>
        <a class="sidebar-item" href="#" onclick="showPage('services')">üíº Services</a>
        <a class="sidebar-item" href="#" onclick="showPage('products')">üì¶ Products</a>
        <a class="sidebar-item" href="#" onclick="showPage('terms')">üìã Terms & Conditions</a>
        <a class="sidebar-item" href="#" onclick="showPage('privacy')">üîí Privacy Policy</a>
        <a class="sidebar-item" href="#" onclick="showPage('account')">üë§ My Account</a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Home Page -->
        <div class="page active" id="home">
            <div class="card">
                <h1 class="card-title">You Dream It We Build It</h1>
                <p style="text-align: center; margin-bottom: 32px; color: var(--text-secondary); font-size: 18px; font-weight: 500;">
                    Transform your vision into reality with our professional website and app development services.
                </p>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-size: 22px; font-weight: 700;">üåü Premium Features</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 12px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 12px; font-size: 18px;">‚úì</span>
                                Professional Website Development
                            </li>
                            <li style="padding: 12px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 12px; font-size: 18px;">‚úì</span>
                                Custom Mobile App Creation
                            </li>
                            <li style="padding: 12px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 12px; font-size: 18px;">‚úì</span>
                                Premium Design Templates
                            </li>
                            <li style="padding: 12px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 12px; font-size: 18px;">‚úì</span>
                                24/7 Customer Support
                            </li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-size: 22px; font-weight: 700;">üöÄ Featured Product</h3>
                        <div style="text-align: center;">
                            <h4 style="color: var(--text-primary); margin-bottom: 8px; font-weight: 600;">Aunix Premium Account</h4>
                            <p style="color: var(--accent-primary); font-size: 36px; font-weight: 800; margin: 16px 0;">120 TK</p>
                            <button class="btn btn-primary" onclick="showPage('products')">Get Premium</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 style="color: var(--accent-primary); margin-bottom: 24px; text-align: center; font-size: 22px; font-weight: 700;">üì¨ Contact & About</h3>
                    <div style="text-align: center; color: var(--text-secondary); font-size: 16px; font-weight: 500; line-height: 1.8;">
                        <p>üìß Email: aunixbdonlinestore@gmail.com</p>
                        <p>üë®‚Äçüíª Made by Aunix Studios Team</p>
                        <p>Aunix Studios specializes in creating premium websites and mobile apps tailored to your business needs with innovative design and full support.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Services Page -->
        <div class="page" id="services">
            <div class="card">
                <h1 class="card-title">Our Premium Services</h1>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 style="font-size: 26px; margin-bottom: 12px; font-weight: 700; color: var(--accent-primary);">üåê Website Development</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 16px; font-weight: 500;">Professional websites for your business</p>
                        <p style="color: var(--accent-primary); font-weight: 800; font-size: 28px;">999 TK</p>
                        <button class="btn btn-primary" style="margin-top: 16px;">Order Now</button>
                    </div>
                    <div class="card">
                        <h3 style="font-size: 26px; margin-bottom: 12px; font-weight: 700; color: var(--accent-primary);">üì± App Development</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 16px; font-weight: 500;">Custom mobile applications</p>
                        <p style="color: var(--accent-primary); font-weight: 800; font-size: 28px;">1120 TK</p>
                        <button class="btn btn-primary" style="margin-top: 16px;">Order Now</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Page -->
        <div class="page" id="products">
            <div class="card">
                <h1 class="card-title">Premium Products</h1>
                <div class="card">
                    <h3 style="color: var(--accent-primary); text-align: center; font-size: 26px; margin-bottom: 16px; font-weight: 700;">Aunix Premium Account</h3>
                    <p style="text-align: center; margin: 24px 0; color: var(--text-secondary); font-size: 16px; font-weight: 500;">
                        Get access to premium features, exclusive content, and priority support
                    </p>
                    <div style="text-align: center; margin: 24px 0;">
                        <span style="font-size: 44px; color: var(--accent-primary); font-weight: 800;">120 TK</span>
                    </div>
                    <form action="https://formspree.io/f/xldlgrnl" id="premiumForm" method="POST">
                        <input name="product" type="hidden" value="Aunix Premium Account"/>
                        <input name="price" type="hidden" value="120"/>
                        <div class="form-group">
                            <label class="form-label">Email Address *</label>
                            <input class="form-input" id="premiumEmailInput" name="email" placeholder="Enter your email" required type="email"/>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone Number *</label>
                            <input class="form-input" id="premiumPhoneInput" name="phone" placeholder="Enter your phone number" required type="text"/>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Select Payment Method</label>
                            <select class="form-select" id="premiumPaymentMethod" name="payment_method" required>
                                <option value="">Choose Payment Method</option>
                                <option value="bkash">bKash</option>
                                <option value="nagad">Nagad</option>
                                <option value="rocket">Rocket</option>
                                <option value="btc">Bitcoin (BTC)</option>
                                <option value="ltc">Litecoin (LTC)</option>
                            </select>
                        </div>
                        <button class="btn btn-primary btn-full-width" type="submit">Purchase Premium</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Terms & Conditions Page -->
        <div class="page" id="terms">
            <div class="card">
                <h1 class="card-title">Terms & Conditions</h1>
                <div style="color: var(--text-secondary); line-height: 1.8; font-weight: 500;">
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">1. Acceptance of Terms</h3>
                    <p>By using Aunix Studio services, you agree to be bound by these Terms and Conditions.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">2. Service Description</h3>
                    <p>Aunix Studio provides website and mobile application development services with professional quality and support.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">3. Payment Terms</h3>
                    <p>All payments must be made in advance. Refunds are subject to our refund policy and project completion status.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">4. Delivery</h3>
                    <p>Project delivery times vary based on complexity and requirements. Standard delivery is 7-14 business days.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">5. Privacy and Data</h3>
                    <p>We collect and process user data in accordance with our Privacy Policy. User authentication data is securely stored using Firebase Auth.</p>
                </div>
            </div>
        </div>

        <!-- Privacy Policy Page -->
        <div class="page" id="privacy">
            <div class="card">
                <h1 class="card-title">Privacy Policy</h1>
                <div style="color: var(--text-secondary); line-height: 1.8; font-weight: 500;">
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">Information We Collect</h3>
                    <p>We collect information you provide directly to us, such as when you create an account, place an order, or contact us for support. This includes email addresses, names, and authentication data through Firebase Auth.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">How We Use Your Information</h3>
                    <p>We use the information we collect to provide, maintain, and improve our services, process payments, authenticate users, and communicate with you.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">Authentication & Security</h3>
                    <p>User authentication is handled by Firebase Authentication, which provides enterprise-grade security. We do not store passwords locally.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 24px 0 12px 0; font-weight: 700;">Data Security</h3>
                    <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                </div>
            </div>
        </div>

        <!-- Account Page -->
        <div class="page" id="account">
            <div class="card">
                <h1 class="card-title">My Account</h1>

                <!-- Authentication Section -->
                <div class="auth-container">
                    <!-- Authentication Forms -->
                    <div id="authSection" class="card">
                        <div class="auth-tabs">
                            <button class="auth-tab active" onclick="switchAuthTab('signin')">Sign In</button>
                            <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
                            <button class="auth-tab" onclick="switchAuthTab('reset')">Reset Password</button>
                        </div>

                        <!-- Google Sign In Button -->
                        <button class="btn btn-google btn-full-width" onclick="handleGoogleAuth()" id="googleAuthBtn">
                            <span>üîê</span>
                            Continue with Google
                        </button>

                        <div class="divider">
                            <span>or</span>
                        </div>

                        <!-- Sign In Form -->
                        <form class="auth-form active" id="signinForm" onsubmit="handleEmailSignIn(event)">
                            <div class="form-group">
                                <label class="form-label">Email Address</label>
                                <input class="form-input" id="signinEmail" type="email" placeholder="Enter your email" required>
                                <div id="signinEmailError" class="message error" style="display: none;"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Password</label>
                                <input class="form-input" id="signinPassword" type="password" placeholder="Enter your password" required>
                                <div id="signinPasswordError" class="message error" style="display: none;"></div>
                            </div>
                            <button class="btn btn-primary btn-full-width" type="submit" id="signinBtn">
                                <span id="signinBtnText">Sign In</span>
                                <span id="signinBtnLoader" class="loading" style="display: none;"></span>
                            </button>
                            <a href="#" class="forgot-password-link" onclick="switchAuthTab('reset')">Forgot your password?</a>
                        </form>

                        <!-- Sign Up Form -->
                        <form class="auth-form" id="signupForm" onsubmit="handleEmailSignUp(event)">
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <input class="form-input" id="signupName" type="text" placeholder="Enter your full name" required>
                                <div id="signupNameError" class="message error" style="display: none;"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email Address</label>
                                <input class="form-input" id="signupEmail" type="email" placeholder="Enter your email" required>
                                <div id="signupEmailError" class="message error" style="display: none;"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Password</label>
                                <input class="form-input" id="signupPassword" type="password" placeholder="Create a password" required oninput="validatePassword()">
                                <div id="signupPasswordError" class="message error" style="display: none;"></div>
                                
                                <div class="password-requirements" id="passwordRequirements" style="display: none;">
                                    <div class="password-requirement" id="lengthReq">
                                        <span>‚Ä¢</span> At least 6 characters
                                    </div>
                                    <div class="password-requirement" id="letterReq">
                                        <span>‚Ä¢</span> At least one letter
                                    </div>
                                    <div class="password-requirement" id="numberReq">
                                        <span>‚Ä¢</span> At least one number
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirm Password</label>
                                <input class="form-input" id="signupPasswordConfirm" type="password" placeholder="Confirm your password" required oninput="validatePasswordMatch()">
                                <div id="confirmPasswordError" class="message error" style="display: none;"></div>
                            </div>
                            <button class="btn btn-success btn-full-width" type="submit" id="signupBtn" disabled>
                                <span id="signupBtnText">Create Account</span>
                                <span id="signupBtnLoader" class="loading" style="display: none;"></span>
                            </button>
                        </form>

                        <!-- Password Reset Form -->
                        <form class="auth-form" id="resetForm" onsubmit="handlePasswordReset(event)">
                            <div class="form-group">
                                <label class="form-label">Email Address</label>
                                <input class="form-input" id="resetEmail" type="email" placeholder="Enter your email" required>
                                <div id="resetEmailError" class="message error" style="display: none;"></div>
                            </div>
                            <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 20px;">
                                We'll send you a link to reset your password.
                            </p>
                            <button class="btn btn-warning btn-full-width" type="submit" id="resetBtn">
                                <span id="resetBtnText">Send Reset Email</span>
                                <span id="resetBtnLoader" class="loading" style="display: none;"></span>
                            </button>
                        </form>

                        <!-- General Auth Messages -->
                        <div id="authMessage" class="message" style="display: none; margin-top: 16px;"></div>
                    </div>

                    <!-- User Profile Section (shown when authenticated) -->
                    <div class="user-profile" id="userProfile">
                        <div class="card">
                            <div class="profile-header">
                                <img id="profileAvatar" class="profile-avatar" src="" alt="Profile Avatar">
                                <div class="profile-info">
                                    <h3 id="profileName">Loading...</h3>
                                    <p id="profileEmail">Loading...</p>
                                    <p id="profileProvider" style="font-size: 14px; color: var(--text-muted);"></p>
                                </div>
                            </div>

                            <div class="profile-stats">
                                <div class="stat-card">
                                    <div class="stat-value" id="accountAge">0</div>
                                    <div class="stat-label">Days Active</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="loginCount">0</div>
                                    <div class="stat-label">Total Logins</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="lastLogin">Never</div>
                                    <div class="stat-label">Last Login</div>
                                </div>
                            </div>

                            <div class="grid grid-2">
                                <button class="btn btn-secondary" onclick="handleSignOut()">
                                    <span>üö™</span>
                                    Sign Out
                                </button>
                                <button class="btn btn-warning" onclick="switchAuthTab('reset')">
                                    <span>üîë</span>
                                    Change Password
                                </button>
                            </div>
                        </div>

                        <!-- Account Settings -->
                        <div class="card">
                            <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 22px; font-weight: 700;">Account Settings</h3>
                            <div class="grid grid-2">
                                <div class="form-group">
                                    <label class="form-label">Display Name</label>
                                    <input class="form-input" id="accountDisplayName" placeholder="Enter display name" type="text">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Country</label>
                                    <select class="form-select" id="accountCountry">
                                        <option value="">Select Country</option>
                                        <option value="Bangladesh">Bangladesh</option>
                                        <option value="India">India</option>
                                        <option value="Pakistan">Pakistan</option>
                                        <option value="USA">United States</option>
                                        <option value="UK">United Kingdom</option>
                                        <option value="Canada">Canada</option>
                                    </select>
                                </div>
                            </div>
                            <div class="grid grid-2">
                                <div class="form-group">
                                    <label class="form-label">Preferred Currency</label>
                                    <select class="form-select" id="accountCurrency">
                                        <option value="TK">Bangladeshi Taka (TK)</option>
                                        <option value="USD">US Dollar (USD)</option>
                                        <option value="EUR">Euro (EUR)</option>
                                        <option value="GBP">British Pound (GBP)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Theme Preference</label>
                                    <select class="form-select" id="accountTheme">
                                        <option value="default">Cyber Blue</option>
                                        <option value="neon-purple">Neon Purple</option>
                                        <option value="electric-green">Electric Green</option>
                                        <option value="fire-orange">Fire Orange</option>
                                        <option value="golden-luxury">Golden Luxury</option>
                                        <option value="rose-pink">Rose Pink</option>
                                        <option value="ocean-teal">Ocean Teal</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-primary" onclick="saveAccountSettings()">
                                <span>üíæ</span>
                                Save Settings
                            </button>
                        </div>

                        <!-- Order History -->
                        <div class="card">
                            <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 22px; font-weight: 700;">Order History</h3>
                            <div id="orderHistory">
                                <p style="text-align: center; color: var(--text-secondary); padding: 40px;">No orders found.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner"></div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let authInitialized = false;

        // Enhanced Toast Notification System
        function showToast(message, type = 'info', duration = 4000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 20px;">${icons[type] || icons.info}</span>
                    <span style="font-weight: 600;">${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto remove
            setTimeout(() => {
                toast.style.animation = 'slideInRight 0.4s reverse';
                setTimeout(() => toast.remove(), 400);
            }, duration);
            
            // Click to dismiss
            toast.addEventListener('click', () => {
                toast.style.animation = 'slideInRight 0.4s reverse';
                setTimeout(() => toast.remove(), 400);
            });
        }

        // Theme Management
        function changeTheme(theme) {
            document.body.className = `theme-${theme}`;
            localStorage.setItem('selectedTheme', theme);
            showToast(`Theme changed to ${theme.replace('-', ' ')}!`, 'success');
            
            // Update user account theme if logged in
            if (currentUser) {
                const accountSettings = JSON.parse(localStorage.getItem(`accountSettings_${currentUser.uid}`) || '{}');
                accountSettings.theme = theme;
                localStorage.setItem(`accountSettings_${currentUser.uid}`, JSON.stringify(accountSettings));
            }
        }

        // Load saved theme
        function loadTheme() {
            let savedTheme = localStorage.getItem('selectedTheme');
            
            // If user is logged in, use their account theme
            if (currentUser) {
                const accountSettings = JSON.parse(localStorage.getItem(`accountSettings_${currentUser.uid}`) || '{}');
                if (accountSettings.theme) {
                    savedTheme = accountSettings.theme;
                }
            }
            
            if (savedTheme) {
                document.body.className = `theme-${savedTheme}`;
                document.querySelector('.theme-dropdown').value = savedTheme;
                const accountThemeSelect = document.getElementById('accountTheme');
                if (accountThemeSelect) {
                    accountThemeSelect.value = savedTheme;
                }
            }
        }

        // Sidebar Management
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Close sidebar
            document.getElementById('sidebar').classList.remove('active');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Authentication Tab Management
        function switchAuthTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.auth-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Hide all forms
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active');
                form.style.display = 'none';
            });
            
            // Show selected form
            const formId = tab === 'signin' ? 'signinForm' : 
                          tab === 'signup' ? 'signupForm' : 'resetForm';
            const form = document.getElementById(formId);
            form.style.display = 'block';
            setTimeout(() => form.classList.add('active'), 10);
            
            // Clear messages
            clearAuthMessages();
        }

        // Clear all authentication messages
        function clearAuthMessages() {
            const messageElements = [
                'signinEmailError', 'signinPasswordError',
                'signupNameError', 'signupEmailError', 'signupPasswordError', 'confirmPasswordError',
                'resetEmailError', 'authMessage'
            ];
            
            messageElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.style.display = 'none';
                    element.textContent = '';
                }
            });
            
            // Reset input styles
            document.querySelectorAll('.form-input').forEach(input => {
                input.classList.remove('error', 'success');
            });
        }

        // Show specific error message
        function showFieldError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            if (field) field.classList.add('error');
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'flex';
            }
        }

        // Show general auth message
        function showAuthMessage(message, type = 'error') {
            const messageElement = document.getElementById('authMessage');
            if (messageElement) {
                messageElement.textContent = message;
                messageElement.className = `message ${type}`;
                messageElement.style.display = 'flex';
            }
        }

        // Set button loading state
        function setButtonLoading(buttonId, loading = true) {
            const btn = document.getElementById(buttonId);
            const textSpan = document.getElementById(buttonId + 'Text');
            const loaderSpan = document.getElementById(buttonId + 'Loader');
            
            if (btn && textSpan && loaderSpan) {
                btn.disabled = loading;
                textSpan.style.display = loading ? 'none' : 'inline';
                loaderSpan.style.display = loading ? 'inline-block' : 'none';
            }
        }

        // Password validation
        function validatePassword() {
            const password = document.getElementById('signupPassword').value;
            const requirements = document.getElementById('passwordRequirements');
            
            if (password.length > 0) {
                requirements.style.display = 'block';
                
                const lengthReq = document.getElementById('lengthReq');
                const letterReq = document.getElementById('letterReq');
                const numberReq = document.getElementById('numberReq');
                
                // Length check
                if (password.length >= 6) {
                    lengthReq.classList.add('valid');
                    lengthReq.classList.remove('invalid');
                } else {
                    lengthReq.classList.add('invalid');
                    lengthReq.classList.remove('valid');
                }
                
                // Letter check
                if (/[a-zA-Z]/.test(password)) {
                    letterReq.classList.add('valid');
                    letterReq.classList.remove('invalid');
                } else {
                    letterReq.classList.add('invalid');
                    letterReq.classList.remove('valid');
                }
                
                // Number check
                if (/\d/.test(password)) {
                    numberReq.classList.add('valid');
                    numberReq.classList.remove('invalid');
                } else {
                    numberReq.classList.add('invalid');
                    numberReq.classList.remove('valid');
                }
                
                checkSignupFormValidity();
            } else {
                requirements.style.display = 'none';
            }
        }

        // Password match validation
        function validatePasswordMatch() {
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupPasswordConfirm').value;
            const errorElement = document.getElementById('confirmPasswordError');
            const field = document.getElementById('signupPasswordConfirm');
            
            if (confirmPassword.length > 0) {
                if (password === confirmPassword) {
                    field.classList.remove('error');
                    field.classList.add('success');
                    errorElement.style.display = 'none';
                } else {
                    field.classList.add('error');
                    field.classList.remove('success');
                    errorElement.textContent = 'Passwords do not match';
                    errorElement.style.display = 'flex';
                }
            }
            
            checkSignupFormValidity();
        }

        // Check if signup form is valid
        function checkSignupFormValidity() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupPasswordConfirm').value;
            const signupBtn = document.getElementById('signupBtn');
            
            const isValidPassword = password.length >= 6 && /[a-zA-Z]/.test(password) && /\d/.test(password);
            const isValidForm = name && email && isValidPassword && password === confirmPassword;
            
            signupBtn.disabled = !isValidForm;
        }

        // Firebase Authentication Functions
        async function handleGoogleAuth() {
            if (!window.firebaseAuth) {
                showToast('Authentication system not ready. Please try again.', 'error');
                return;
            }

            const btn = document.getElementById('googleAuthBtn');
            const originalText = btn.innerHTML;
            
            try {
                btn.innerHTML = '<span class="loading"></span> Connecting...';
                btn.disabled = true;
                
                clearAuthMessages();
                
                const result = await window.firebaseAuth.signInWithPopup(
                    window.firebaseAuth.auth, 
                    window.firebaseAuth.googleProvider
                );
                
                const user = result.user;
                
                // Update login stats
                updateLoginStats(user.uid);
                
                showToast(`Welcome back, ${user.displayName || user.email}!`, 'success');
                
            } catch (error) {
                console.error('Google auth error:', error);
                handleAuthError(error);
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function handleEmailSignIn(event) {
            event.preventDefault();
            
            if (!window.firebaseAuth) {
                showToast('Authentication system not ready. Please try again.', 'error');
                return;
            }

            const email = document.getElementById('signinEmail').value.trim();
            const password = document.getElementById('signinPassword').value;
            
            clearAuthMessages();
            setButtonLoading('signinBtn', true);
            
            try {
                const result = await window.firebaseAuth.signInWithEmailAndPassword(
                    window.firebaseAuth.auth, 
                    email, 
                    password
                );
                
                const user = result.user;
                
                // Update login stats
                updateLoginStats(user.uid);
                
                showToast(`Welcome back, ${user.displayName || user.email}!`, 'success');
                
            } catch (error) {
                console.error('Email sign in error:', error);
                handleAuthError(error);
            } finally {
                setButtonLoading('signinBtn', false);
            }
        }

        async function handleEmailSignUp(event) {
            event.preventDefault();
            
            if (!window.firebaseAuth) {
                showToast('Authentication system not ready. Please try again.', 'error');
                return;
            }

            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupPasswordConfirm').value;
            
            // Validate form
            if (!name) {
                showFieldError('signupName', 'Please enter your full name');
                return;
            }
            
            if (password !== confirmPassword) {
                showFieldError('signupPasswordConfirm', 'Passwords do not match');
                return;
            }
            
            if (password.length < 6) {
                showFieldError('signupPassword', 'Password must be at least 6 characters');
                return;
            }
            
            clearAuthMessages();
            setButtonLoading('signupBtn', true);
            
            try {
                const result = await window.firebaseAuth.createUserWithEmailAndPassword(
                    window.firebaseAuth.auth, 
                    email, 
                    password
                );
                
                const user = result.user;
                
                // Update user profile with display name
                await window.firebaseAuth.updateProfile(user, {
                    displayName: name
                });
                
                // Initialize login stats
                updateLoginStats(user.uid, true);
                
                showToast(`Account created successfully! Welcome, ${name}!`, 'success');
                
            } catch (error) {
                console.error('Email sign up error:', error);
                handleAuthError(error);
            } finally {
                setButtonLoading('signupBtn', false);
            }
        }

        async function handlePasswordReset(event) {
            event.preventDefault();
            
            if (!window.firebaseAuth) {
                showToast('Authentication system not ready. Please try again.', 'error');
                return;
            }

            const email = document.getElementById('resetEmail').value.trim();
            
            if (!email) {
                showFieldError('resetEmail', 'Please enter your email address');
                return;
            }
            
            clearAuthMessages();
            setButtonLoading('resetBtn', true);
            
            try {
                await window.firebaseAuth.sendPasswordResetEmail(window.firebaseAuth.auth, email);
                
                showAuthMessage('Password reset email sent! Check your inbox.', 'success');
                showToast('Password reset email sent successfully!', 'success');
                
            } catch (error) {
                console.error('Password reset error:', error);
                handleAuthError(error);
            } finally {
                setButtonLoading('resetBtn', false);
            }
        }

        async function handleSignOut() {
            if (!window.firebaseAuth || !currentUser) {
                return;
            }

            try {
                await window.firebaseAuth.signOut(window.firebaseAuth.auth);
                showToast('Signed out successfully!', 'success');
            } catch (error) {
                console.error('Sign out error:', error);
                showToast('Error signing out. Please try again.', 'error');
            }
        }

        // Handle authentication errors
        function handleAuthError(error) {
            let message = 'An error occurred. Please try again.';
            
            switch (error.code) {
                case 'auth/user-not-found':
                    message = 'No account found with this email address.';
                    showFieldError('signinEmail', message);
                    break;
                case 'auth/wrong-password':
                    message = 'Incorrect password. Please try again.';
                    showFieldError('signinPassword', message);
                    break;
                case 'auth/invalid-email':
                    message = 'Please enter a valid email address.';
                    break;
                case 'auth/user-disabled':
                    message = 'This account has been disabled.';
                    break;
                case 'auth/email-already-in-use':
                    message = 'An account with this email already exists.';
                    showFieldError('signupEmail', message);
                    break;
                case 'auth/weak-password':
                    message = 'Password is too weak. Please choose a stronger password.';
                    showFieldError('signupPassword', message);
                    break;
                case 'auth/popup-closed-by-user':
                    message = 'Sign-in was cancelled. Please try again.';
                    break;
                case 'auth/popup-blocked':
                    message = 'Pop-up was blocked. Please allow pop-ups and try again.';
                    break;
                case 'auth/too-many-requests':
                    message = 'Too many failed attempts. Please try again later.';
                    break;
                default:
                    console.error('Auth error:', error);
                    message = error.message || 'Authentication failed. Please try again.';
            }
            
            showAuthMessage(message, 'error');
            showToast(message, 'error');
        }

        // Update login statistics
        function updateLoginStats(uid, isNewUser = false) {
            const now = new Date();
            const statsKey = `loginStats_${uid}`;
            let stats = JSON.parse(localStorage.getItem(statsKey) || '{}');
            
            if (isNewUser) {
                stats = {
                    firstLogin: now.toISOString(),
                    loginCount: 1,
                    lastLogin: now.toISOString()
                };
            } else {
                stats.loginCount = (stats.loginCount || 0) + 1;
                stats.lastLogin = now.toISOString();
                if (!stats.firstLogin) {
                    stats.firstLogin = now.toISOString();
                }
            }
            
            localStorage.setItem(statsKey, JSON.stringify(stats));
        }

        // Get account age in days
        function getAccountAge(uid) {
            const statsKey = `loginStats_${uid}`;
            const stats = JSON.parse(localStorage.getItem(statsKey) || '{}');
            
            if (stats.firstLogin) {
                const firstLogin = new Date(stats.firstLogin);
                const now = new Date();
                const diffTime = Math.abs(now - firstLogin);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                return diffDays;
            }
            
            return 0;
        }

        // Update user interface based on auth state
        function updateUserInterface(user) {
            const authSection = document.getElementById('authSection');
            const userProfile = document.getElementById('userProfile');
            const userHeaderInfo = document.getElementById('userHeaderInfo');
            
            if (user) {
                // Hide auth forms, show profile
                authSection.style.display = 'none';
                userProfile.classList.add('active');
                userHeaderInfo.style.display = 'flex';
                
                // Update profile information
                const avatar = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || user.email)}&background=00d4ff&color=000&size=200`;
                
                document.getElementById('profileAvatar').src = avatar;
                document.getElementById('profileName').textContent = user.displayName || 'Anonymous User';
                document.getElementById('profileEmail').textContent = user.email;
                document.getElementById('profileProvider').textContent = user.providerData[0]?.providerId.includes('google') ? 'Signed in with Google' : 'Signed in with Email';
                
                // Update header user info
                document.getElementById('userHeaderAvatar').src = avatar;
                document.getElementById('userHeaderName').textContent = user.displayName || user.email.split('@')[0];
                
                // Update stats
                const stats = JSON.parse(localStorage.getItem(`loginStats_${user.uid}`) || '{}');
                document.getElementById('accountAge').textContent = getAccountAge(user.uid);
                document.getElementById('loginCount').textContent = stats.loginCount || 0;
                document.getElementById('lastLogin').textContent = stats.lastLogin ? 
                    new Date(stats.lastLogin).toLocaleDateString() : 'Never';
                
                // Load account settings
                loadAccountSettings(user.uid);
                
                // Pre-fill premium form
                const premiumEmail = document.getElementById('premiumEmailInput');
                if (premiumEmail) premiumEmail.value = user.email;
                
            } else {
                // Show auth forms, hide profile
                authSection.style.display = 'block';
                userProfile.classList.remove('active');
                userHeaderInfo.style.display = 'none';
                
                // Clear forms
                document.querySelectorAll('.auth-form input').forEach(input => input.value = '');
                clearAuthMessages();
            }
        }

        // Load account settings
        function loadAccountSettings(uid) {
            const settings = JSON.parse(localStorage.getItem(`accountSettings_${uid}`) || '{}');
            
            if (settings.displayName) document.getElementById('accountDisplayName').value = settings.displayName;
            if (settings.country) document.getElementById('accountCountry').value = settings.country;
            if (settings.currency) document.getElementById('accountCurrency').value = settings.currency;
            if (settings.theme) {
                document.getElementById('accountTheme').value = settings.theme;
                changeTheme(settings.theme);
            }
        }

        // Save account settings
        function saveAccountSettings() {
            if (!currentUser) {
                showToast('Please sign in to save settings.', 'error');
                return;
            }
            
            const settings = {
                displayName: document.getElementById('accountDisplayName').value,
                country: document.getElementById('accountCountry').value,
                currency: document.getElementById('accountCurrency').value,
                theme: document.getElementById('accountTheme').value
            };
            
            localStorage.setItem(`accountSettings_${currentUser.uid}`, JSON.stringify(settings));
            
            // Apply theme immediately
            if (settings.theme) {
                changeTheme(settings.theme);
            }
            
            showToast('Account settings saved successfully!', 'success');
        }

        // Initialize Firebase Authentication
        function initializeAuth() {
            if (!window.firebaseAuth) {
                console.log('Firebase Auth not ready, retrying...');
                setTimeout(initializeAuth, 100);
                return;
            }
            
            // Set up auth state listener
            window.firebaseAuth.onAuthStateChanged(window.firebaseAuth.auth, (user) => {
                currentUser = user;
                updateUserInterface(user);
                
                if (!authInitialized) {
                    authInitialized = true;
                    loadTheme();
                }
            });
            
            console.log('Firebase Auth initialized successfully');
        }

        // Close sidebar when clicking outside
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('sidebar');
            const menuBtn = document.querySelector('.menu-btn');
            
            if (!sidebar.contains(e.target) && !menuBtn.contains(e.target)) {
                sidebar.classList.remove('active');
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // ESC to close sidebar
            if (e.key === 'Escape') {
                document.getElementById('sidebar').classList.remove('active');
            }
        });

        // Form input real-time validation
        document.addEventListener('DOMContentLoaded', function() {
            // Name validation
            const nameInputs = ['signupName', 'accountDisplayName'];
            nameInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', function() {
                        if (this.value.trim().length >= 2) {
                            this.classList.remove('error');
                            this.classList.add('success');
                        } else {
                            this.classList.remove('success');
                        }
                    });
                }
            });
            
            // Email validation
            const emailInputs = ['signinEmail', 'signupEmail', 'resetEmail'];
            emailInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', function() {
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (emailRegex.test(this.value)) {
                            this.classList.remove('error');
                            this.classList.add('success');
                        } else {
                            this.classList.remove('success');
                        }
                    });
                }
            });
            
            // Initialize authentication
            initializeAuth();
        });

        // Loading overlay functions
        function showLoadingOverlay() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        function hideLoadingOverlay() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        // Auto-hide loading overlay after page load
        window.addEventListener('load', function() {
            setTimeout(hideLoadingOverlay, 500);
        });
    </script>
</body>
       </html>
