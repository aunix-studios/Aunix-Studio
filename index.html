<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aunix Studio Pro - Premium Development Services</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           CSS RESET & BASE STYLES
        ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ========================================
           PROFESSIONAL & LUXURY THEME SYSTEM
        ======================================== */
        :root {
            /* Default: Executive Elite Theme */
            --primary-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 35%, #334155 100%);
            --secondary-bg: rgba(148, 163, 184, 0.08);
            --accent-primary: #3b82f6;
            --accent-secondary: #8b5cf6;
            --accent-gold: #f59e0b;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #64748b;
            --border-color: rgba(148, 163, 184, 0.2);
            --card-bg: rgba(148, 163, 184, 0.05);
            --input-bg: rgba(148, 163, 184, 0.08);
            --button-primary: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            --button-secondary: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            --button-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --shadow-soft: 0 8px 32px rgba(59, 130, 246, 0.15);
            --shadow-strong: 0 16px 64px rgba(59, 130, 246, 0.25);
            --border-radius: 20px;
            --border-radius-small: 12px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --font-primary: 'Inter', -apple-system, sans-serif;
            --font-display: 'Inter', -apple-system, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --spacing-unit: 8px;
            --backdrop-blur: blur(24px);
            --content-max-width: 1400px;
            --header-height: 80px;
            --sidebar-width: 350px;
        }

        /* Platinum Business Theme */
        .theme-platinum-business {
            --primary-bg: linear-gradient(135deg, #18181b 0%, #27272a 35%, #3f3f46 100%);
            --secondary-bg: rgba(212, 212, 216, 0.08);
            --accent-primary: #e4e4e7;
            --accent-secondary: #a1a1aa;
            --accent-gold: #fbbf24;
            --text-primary: #fafafa;
            --text-secondary: #d4d4d8;
            --text-muted: #71717a;
            --border-color: rgba(212, 212, 216, 0.15);
            --card-bg: rgba(212, 212, 216, 0.03);
            --input-bg: rgba(212, 212, 216, 0.06);
            --button-primary: linear-gradient(135deg, #e4e4e7 0%, #a1a1aa 100%);
            --button-secondary: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            --shadow-soft: 0 12px 40px rgba(0, 0, 0, 0.3);
            --shadow-strong: 0 20px 80px rgba(0, 0, 0, 0.4);
            --border-radius: 16px;
            --border-radius-small: 8px;
            --font-display: 'Playfair Display', serif;
            --backdrop-blur: blur(20px);
        }

        /* Royal Emerald Theme */
        .theme-royal-emerald {
            --primary-bg: linear-gradient(135deg, #022c22 0%, #064e3b 35%, #065f46 100%);
            --secondary-bg: rgba(16, 185, 129, 0.12);
            --accent-primary: #10b981;
            --accent-secondary: #34d399;
            --accent-gold: #f59e0b;
            --text-primary: #ecfdf5;
            --text-secondary: #a7f3d0;
            --text-muted: #6ee7b7;
            --border-color: rgba(16, 185, 129, 0.3);
            --card-bg: rgba(16, 185, 129, 0.08);
            --input-bg: rgba(16, 185, 129, 0.12);
            --button-primary: linear-gradient(135deg, #10b981 0%, #047857 100%);
            --button-secondary: linear-gradient(135deg, #34d399 0%, #10b981 100%);
            --shadow-soft: 0 8px 32px rgba(16, 185, 129, 0.2);
            --shadow-strong: 0 16px 64px rgba(16, 185, 129, 0.3);
            --border-radius: 24px;
            --border-radius-small: 16px;
            --font-primary: 'Poppins', sans-serif;
            --font-display: 'Poppins', sans-serif;
            --backdrop-blur: blur(28px);
        }

        /* Crimson Executive Theme */
        .theme-crimson-executive {
            --primary-bg: linear-gradient(135deg, #450a0a 0%, #7f1d1d 35%, #991b1b 100%);
            --secondary-bg: rgba(220, 38, 38, 0.12);
            --accent-primary: #dc2626;
            --accent-secondary: #ef4444;
            --accent-gold: #fbbf24;
            --text-primary: #fef2f2;
            --text-secondary: #fecaca;
            --text-muted: #f87171;
            --border-color: rgba(220, 38, 38, 0.3);
            --card-bg: rgba(220, 38, 38, 0.08);
            --input-bg: rgba(220, 38, 38, 0.12);
            --button-primary: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            --button-secondary: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            --shadow-soft: 0 8px 32px rgba(220, 38, 38, 0.25);
            --shadow-strong: 0 16px 64px rgba(220, 38, 38, 0.35);
            --border-radius: 18px;
            --border-radius-small: 10px;
            --font-display: 'Playfair Display', serif;
            --backdrop-blur: blur(32px);
        }

        /* Sunset Luxury Theme */
        .theme-sunset-luxury {
            --primary-bg: linear-gradient(135deg, #431407 0%, #9a3412 35%, #ea580c 100%);
            --secondary-bg: rgba(251, 146, 60, 0.12);
            --accent-primary: #fb923c;
            --accent-secondary: #f97316;
            --accent-gold: #fbbf24;
            --text-primary: #fff7ed;
            --text-secondary: #fed7aa;
            --text-muted: #fdba74;
            --border-color: rgba(251, 146, 60, 0.3);
            --card-bg: rgba(251, 146, 60, 0.08);
            --input-bg: rgba(251, 146, 60, 0.12);
            --button-primary: linear-gradient(135deg, #fb923c 0%, #c2410c 100%);
            --button-secondary: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            --shadow-soft: 0 8px 32px rgba(251, 146, 60, 0.2);
            --shadow-strong: 0 16px 64px rgba(251, 146, 60, 0.3);
            --border-radius: 28px;
            --border-radius-small: 18px;
            --font-primary: 'Poppins', sans-serif;
            --backdrop-blur: blur(30px);
        }

        /* Gold Standard Theme */
        .theme-gold-standard {
            --primary-bg: linear-gradient(135deg, #451a03 0%, #92400e 35%, #b45309 100%);
            --secondary-bg: rgba(252, 211, 77, 0.12);
            --accent-primary: #fbbf24;
            --accent-secondary: #f59e0b;
            --accent-gold: #fcd34d;
            --text-primary: #fffbeb;
            --text-secondary: #fde68a;
            --text-muted: #fbbf24;
            --border-color: rgba(252, 211, 77, 0.3);
            --card-bg: rgba(252, 211, 77, 0.08);
            --input-bg: rgba(252, 211, 77, 0.12);
            --button-primary: linear-gradient(135deg, #fbbf24 0%, #92400e 100%);
            --button-secondary: linear-gradient(135deg, #f59e0b 0%, #b45309 100%);
            --shadow-soft: 0 8px 32px rgba(252, 211, 77, 0.2);
            --shadow-strong: 0 16px 64px rgba(252, 211, 77, 0.3);
            --border-radius: 22px;
            --border-radius-small: 14px;
            --font-display: 'Playfair Display', serif;
            --backdrop-blur: blur(26px);
        }

        /* Purple Royalty Theme */
        .theme-purple-royalty {
            --primary-bg: linear-gradient(135deg, #2e1065 0%, #5b21b6 35%, #7c3aed 100%);
            --secondary-bg: rgba(168, 85, 247, 0.12);
            --accent-primary: #a855f7;
            --accent-secondary: #c084fc;
            --accent-gold: #fbbf24;
            --text-primary: #faf5ff;
            --text-secondary: #ddd6fe;
            --text-muted: #c4b5fd;
            --border-color: rgba(168, 85, 247, 0.3);
            --card-bg: rgba(168, 85, 247, 0.08);
            --input-bg: rgba(168, 85, 247, 0.12);
            --button-primary: linear-gradient(135deg, #a855f7 0%, #6d28d9 100%);
            --button-secondary: linear-gradient(135deg, #c084fc 0%, #a855f7 100%);
            --shadow-soft: 0 8px 32px rgba(168, 85, 247, 0.2);
            --shadow-strong: 0 16px 64px rgba(168, 85, 247, 0.3);
            --border-radius: 26px;
            --border-radius-small: 16px;
            --font-display: 'Playfair Display', serif;
            --backdrop-blur: blur(34px);
        }

        /* ========================================
           PREMIUM PRO SYSTEM STYLES
        ======================================== */
        .premium-status-indicator {
            position: fixed;
            top: calc(var(--header-height) + 20px);
            right: 20px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #000;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            font-weight: 800;
            font-size: 14px;
            z-index: 1000;
            box-shadow: var(--shadow-strong);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: var(--font-primary);
            display: none;
            animation: luxuryFadeIn 0.8s ease-out;
        }

        .premium-status-indicator.active {
            display: block;
        }

        .premium-mode-toggle {
            position: fixed;
            top: calc(var(--header-height) + 80px);
            right: 20px;
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 16px;
            z-index: 1000;
            backdrop-filter: var(--backdrop-blur);
            box-shadow: var(--shadow-soft);
            display: none;
        }

        .premium-mode-toggle.active {
            display: block;
            animation: luxuryFadeIn 0.8s ease-out;
        }

        .mode-toggle-btn {
            background: var(--button-primary);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: var(--border-radius-small);
            font-weight: 700;
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0 4px;
        }

        .mode-toggle-btn.active {
            background: var(--accent-gold);
            color: #000;
        }

        .mode-toggle-btn:hover {
            transform: scale(1.05);
        }

        .premium-benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: calc(var(--spacing-unit) * 3);
            margin: calc(var(--spacing-unit) * 4) 0;
        }

        .benefit-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            text-align: center;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .benefit-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary), var(--accent-gold));
        }

        .benefit-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-strong);
            border-color: var(--accent-primary);
        }

        .benefit-icon {
            font-size: 48px;
            margin-bottom: calc(var(--spacing-unit) * 2);
            display: block;
        }

        .benefit-title {
            color: var(--accent-primary);
            font-size: 20px;
            font-weight: 700;
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-family: var(--font-display);
        }

        .benefit-description {
            color: var(--text-secondary);
            line-height: 1.6;
            font-weight: 500;
        }

        .premium-pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: calc(var(--spacing-unit) * 3);
            margin: calc(var(--spacing-unit) * 4) 0;
        }

        .pricing-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 5);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .pricing-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .pricing-card:hover::before {
            opacity: 0.1;
        }

        .pricing-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-strong);
            border-color: var(--accent-primary);
        }

        .pricing-card.selected {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-strong);
            transform: translateY(-6px);
        }

        .pricing-card.selected::before {
            opacity: 0.15;
        }

        .pricing-duration {
            color: var(--text-primary);
            font-size: 24px;
            font-weight: 700;
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-family: var(--font-display);
        }

        .pricing-amount {
            color: var(--accent-primary);
            font-size: 36px;
            font-weight: 900;
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-family: var(--font-display);
        }

        .pricing-discount {
            background: var(--button-success);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .delivery-notice {
            background: rgba(251, 146, 60, 0.1);
            border: 2px solid rgba(251, 146, 60, 0.3);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3);
            margin-top: calc(var(--spacing-unit) * 3);
            text-align: center;
        }

        .delivery-notice-title {
            color: #fb923c;
            font-weight: 700;
            margin-bottom: calc(var(--spacing-unit) * 1);
            font-family: var(--font-display);
        }

        .delivery-notice-text {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .premium-code-input {
            text-align: center;
            font-size: 24px;
            font-weight: 700;
            font-family: var(--font-mono);
            letter-spacing: 4px;
            text-transform: uppercase;
            background: var(--input-bg);
            border: 3px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            color: var(--text-primary);
            transition: var(--transition);
        }

        .premium-code-input:focus {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-strong);
            background: var(--card-bg);
        }

        .premium-status-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(34, 197, 94, 0.05));
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            text-align: center;
            margin: calc(var(--spacing-unit) * 4) 0;
        }

        .premium-status-title {
            color: #10b981;
            font-size: 28px;
            font-weight: 800;
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-family: var(--font-display);
        }

        .premium-expiry {
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 600;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .premium-features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: calc(var(--spacing-unit) * 2);
            margin-top: calc(var(--spacing-unit) * 3);
        }

        .premium-feature {
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 2);
            color: var(--text-secondary);
            font-weight: 500;
        }

        .premium-feature-icon {
            color: #10b981;
            font-size: 20px;
        }

        /* Pro Mode Styling */
        body.pro-mode {
            --accent-primary: #fbbf24;
            --accent-secondary: #f59e0b;
        }

        body.pro-mode .card::before {
            background: linear-gradient(90deg, transparent, #fbbf24, #f59e0b, transparent);
        }

        body.pro-mode .logo {
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #fcd34d);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientFlow 4s ease-in-out infinite;
        }

        /* Hide branding in Pro mode */
        body.pro-mode .branding-text {
            display: none !important;
        }

        /* ========================================
           MISSED PRODUCTS SPECIFIC STYLES
        ======================================== */
        .missed-product-limits {
            background: var(--secondary-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3);
            margin-bottom: calc(var(--spacing-unit) * 4);
        }

        .missed-product-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: calc(var(--spacing-unit) * 2);
            background: var(--input-bg);
            border-radius: var(--border-radius-small);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .missed-product-counter.warning {
            border: 2px solid #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .missed-product-counter.danger {
            border: 2px solid #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .variant-container {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 2);
            margin-top: calc(var(--spacing-unit) * 2);
        }

        .variant-item {
            display: flex;
            gap: calc(var(--spacing-unit) * 2);
            align-items: center;
            padding: calc(var(--spacing-unit) * 2);
            background: var(--input-bg);
            border-radius: var(--border-radius-small);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .variant-item:last-child {
            margin-bottom: 0;
        }

        .variant-remove-btn {
            background: #ef4444;
            border: none;
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
            color: white;
            cursor: pointer;
            font-size: 12px;
            font-weight: 700;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .variant-remove-btn:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .add-variant-btn {
            background: var(--button-secondary);
            border: none;
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
            color: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            width: 100%;
            margin-top: calc(var(--spacing-unit) * 2);
        }

        .add-variant-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }

        .add-variant-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ========================================
           ENHANCED ANIMATIONS & KEYFRAMES
        ======================================== */
        @keyframes luxuryFadeIn {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
                filter: blur(4px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        @keyframes elegantSlide {
            0% {
                opacity: 0;
                transform: translateX(-60px) skewX(-5deg);
            }
            100% {
                opacity: 1;
                transform: translateX(0) skewX(0);
            }
        }

        @keyframes professionalScale {
            0% {
                transform: scale(0.9);
                opacity: 0;
                box-shadow: none;
            }
            100% {
                transform: scale(1);
                opacity: 1;
                box-shadow: var(--shadow-soft);
            }
        }

        @keyframes luxuryPulse {
            0%, 100% {
                transform: scale(1);
                filter: brightness(1);
            }
            50% {
                transform: scale(1.03);
                filter: brightness(1.1);
            }
        }

        @keyframes premiumShimmer {
            0% {
                transform: translateX(-100%) skewX(-20deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(300%) skewX(-20deg);
                opacity: 0;
            }
        }

        @keyframes gradientFlow {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes sophisticatedFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-15px) rotate(1deg);
            }
        }

        @keyframes executiveGlow {
            0%, 100% {
                box-shadow: var(--shadow-soft);
            }
            50% {
                box-shadow: var(--shadow-strong);
            }
        }

        /* ========================================
           ENHANCED TYPOGRAPHY & BASE STYLES
        ======================================== */
        body {
            font-family: var(--font-primary);
            background: var(--primary-bg);
            background-attachment: fixed;
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.7;
            font-weight: 400;
            scroll-behavior: smooth;
            letter-spacing: -0.01em;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Enhanced Background Patterns for Different Themes */
        .theme-platinum-business body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(212, 212, 216, 0.05) 0%, transparent 25%),
                radial-gradient(circle at 75% 75%, rgba(212, 212, 216, 0.03) 0%, transparent 25%);
            pointer-events: none;
            z-index: -1;
        }

        .theme-royal-emerald body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 50px,
                    rgba(16, 185, 129, 0.02) 50px,
                    rgba(16, 185, 129, 0.02) 52px
                );
            pointer-events: none;
            z-index: -1;
        }

        .theme-purple-royalty body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(ellipse at 20% 80%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(196, 181, 253, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        /* ========================================
           PROFESSIONAL HEADER COMPONENT
        ======================================== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 calc(var(--spacing-unit) * 4);
            height: var(--header-height);
            background: var(--card-bg);
            backdrop-filter: var(--backdrop-blur);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-soft);
            animation: elegantSlide 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .menu-btn {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            padding: calc(var(--spacing-unit) * 2);
            border-radius: var(--border-radius-small);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 6px;
            width: 56px;
            height: 56px;
            justify-content: center;
            align-items: center;
        }

        .menu-line {
            width: 24px;
            height: 3px;
            background: var(--text-primary);
            transition: var(--transition);
            border-radius: 2px;
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: var(--accent-primary);
            border-radius: 50%;
            transition: var(--transition);
            transform: translate(-50%, -50%);
            z-index: -1;
        }

        .menu-btn:hover::before {
            width: 120px;
            height: 120px;
        }

        .menu-btn:hover {
            color: #000;
            transform: scale(1.05);
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-soft);
        }

        .menu-btn:hover .menu-line {
            background: #000;
        }

        .logo {
            font-size: 28px;
            font-weight: 900;
            font-family: var(--font-display);
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary), var(--accent-gold));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            overflow: hidden;
            animation: gradientFlow 4s ease-in-out infinite;
            letter-spacing: -0.02em;
        }

        .logo::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), transparent);
            animation: premiumShimmer 4s infinite;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 2);
            font-weight: 600;
            color: var(--text-primary);
            font-family: var(--font-primary);
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 3px solid var(--accent-primary);
            object-fit: cover;
            transition: var(--transition);
            box-shadow: var(--shadow-soft);
        }

        .user-avatar:hover {
            transform: scale(1.1);
            animation: luxuryPulse 2s ease-in-out infinite;
        }

        .login-btn {
            background: var(--button-primary);
            border: none;
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            color: white;
            cursor: pointer;
            font-weight: 700;
            font-family: var(--font-primary);
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            font-size: 14px;
            box-shadow: var(--shadow-soft);
        }

        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition);
        }

        .login-btn:hover::before {
            left: 100%;
        }

        .login-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: var(--shadow-strong);
        }

        /* ========================================
           LUXURY SIDEBAR COMPONENT
        ======================================== */
        .sidebar {
            position: fixed;
            left: calc(-1 * var(--sidebar-width));
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--card-bg);
            backdrop-filter: var(--backdrop-blur);
            border-right: 1px solid var(--border-color);
            transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1001;
            padding: var(--header-height) 0 calc(var(--spacing-unit) * 3) 0;
            box-shadow: var(--shadow-strong);
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            padding: calc(var(--spacing-unit) * 3) calc(var(--spacing-unit) * 4);
            color: var(--text-primary);
            text-decoration: none;
            transition: var(--transition);
            border-left: 4px solid transparent;
            font-weight: 600;
            font-family: var(--font-primary);
            position: relative;
            overflow: hidden;
            font-size: 16px;
            letter-spacing: -0.01em;
        }

        .sidebar-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            transition: var(--transition);
            z-index: -1;
        }

        .sidebar-item:hover::before {
            width: 100%;
        }

        .sidebar-item:hover {
            color: #000;
            border-left-color: var(--accent-primary);
            transform: translateX(calc(var(--spacing-unit) * 2));
            font-weight: 700;
        }

        /* ========================================
           MAIN CONTENT & ENHANCED PAGE SYSTEM
        ======================================== */
        .main-content {
            padding: calc(var(--spacing-unit) * 4);
            max-width: var(--content-max-width);
            margin: 0 auto;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: luxuryFadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ========================================
           PREMIUM CARD COMPONENTS
        ======================================== */
        .card {
            background: var(--card-bg);
            backdrop-filter: var(--backdrop-blur);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 5);
            margin-bottom: calc(var(--spacing-unit) * 4);
            box-shadow: var(--shadow-soft);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), var(--accent-secondary), transparent);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-strong);
            border-color: var(--accent-primary);
        }

        .card-title {
            font-size: clamp(28px, 4vw, 40px);
            font-weight: 900;
            font-family: var(--font-display);
            margin-bottom: calc(var(--spacing-unit) * 4);
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            position: relative;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        /* Theme-specific card variations */
        .theme-platinum-business .card {
            border: 2px solid var(--border-color);
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .theme-royal-emerald .card {
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background: linear-gradient(135deg, var(--card-bg), rgba(16, 185, 129, 0.03));
        }

        .theme-purple-royalty .card {
            border-radius: var(--border-radius);
            background: linear-gradient(135deg, var(--card-bg), rgba(168, 85, 247, 0.05));
            border: 2px solid var(--border-color);
        }

        /* ========================================
           ENHANCED FORM ELEMENTS
        ======================================== */
        .form-group {
            margin-bottom: calc(var(--spacing-unit) * 4);
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: calc(var(--spacing-unit) * 1.5);
            font-weight: 700;
            color: var(--text-primary);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: var(--font-primary);
        }

        .form-input, 
        .form-select, 
        .form-textarea {
            width: 100%;
            padding: calc(var(--spacing-unit) * 3);
            background: var(--input-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 16px;
            transition: var(--transition);
            backdrop-filter: var(--backdrop-blur);
            font-family: var(--font-primary);
            font-weight: 500;
            letter-spacing: -0.01em;
        }

        .form-input:focus, 
        .form-select:focus, 
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-strong);
            background: var(--card-bg);
        }

        .form-textarea {
            resize: vertical;
            min-height: 140px;
            line-height: 1.6;
        }

        /* ========================================
           LUXURY BUTTON COMPONENTS
        ======================================== */
        .btn {
            border: none;
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3) calc(var(--spacing-unit) * 6);
            color: white;
            font-size: 16px;
            font-weight: 700;
            font-family: var(--font-primary);
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            box-shadow: var(--shadow-soft);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition);
        }

        .btn::after {
            content: '';
            position: absolute;
            bottom: 6px;
            left: 6px;
            right: 6px;
            top: 6px;
            border: 2px solid transparent;
            border-radius: calc(var(--border-radius) - 6px);
            transition: var(--transition);
            pointer-events: none;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover::after {
            border-color: rgba(255,255,255,0.5);
            bottom: 4px;
            left: 4px;
            right: 4px;
            top: 4px;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: var(--shadow-strong);
        }

        .btn:active {
            transform: translateY(-3px) scale(1.01);
        }

        .btn-primary {
            background: var(--button-primary);
        }

        .btn-secondary {
            background: var(--button-secondary);
        }

        .btn-success {
            background: var(--button-success);
        }

        .btn-small {
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            font-size: 14px;
        }

        /* ========================================
           PROFESSIONAL GRID LAYOUTS
        ======================================== */
        .grid {
            display: grid;
            gap: calc(var(--spacing-unit) * 4);
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        /* ========================================
           PREMIUM SELECTION CARDS
        ======================================== */
        .selection-card {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: var(--backdrop-blur);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
        }

        .selection-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .selection-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-strong);
        }

        .selection-card:hover::before {
            opacity: 0.15;
        }

        .selection-card.selected {
            border-color: var(--accent-primary);
            color: var(--text-primary);
            box-shadow: var(--shadow-strong);
            transform: translateY(-6px);
        }

        .selection-card.selected::before {
            opacity: 0.2;
        }

        /* ========================================
           ENHANCED FEATURE LIST COMPONENTS
        ======================================== */
        .feature-list {
            list-style: none;
        }

        .feature-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: calc(var(--spacing-unit) * 3);
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            margin-bottom: calc(var(--spacing-unit) * 2);
            transition: var(--transition);
            border: 2px solid var(--border-color);
            font-weight: 500;
            font-family: var(--font-primary);
        }

        .feature-item:hover {
            background: var(--input-bg);
            transform: translateX(calc(var(--spacing-unit) * 2));
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-soft);
        }

        .feature-item.selected {
            background: var(--input-bg);
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-soft);
        }

        .feature-checkbox {
            width: 24px;
            height: 24px;
            accent-color: var(--accent-primary);
            cursor: pointer;
        }

        /* ========================================
           PREMIUM PAYMENT COMPONENTS
        ======================================== */
        .payment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: calc(var(--spacing-unit) * 3);
            margin-bottom: calc(var(--spacing-unit) * 4);
        }

        .payment-method {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            font-weight: 600;
            font-family: var(--font-primary);
            box-shadow: var(--shadow-soft);
        }

        .payment-method::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            opacity: 0;
            transition: var(--transition);
            z-index: -1;
        }

        .payment-method:hover {
            border-color: var(--accent-primary);
            transform: translateY(-8px) scale(1.03);
            box-shadow: var(--shadow-strong);
        }

        .payment-method:hover::before {
            opacity: 0.15;
        }

        .payment-method.selected {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-strong);
            transform: translateY(-4px);
        }

        .payment-method.selected::before {
            opacity: 0.2;
        }

        /* ========================================
           LUXURY AUTHENTICATION COMPONENTS
        ======================================== */
        .auth-method-selection {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            margin-top: calc(var(--spacing-unit) * 4);
            border: 2px solid var(--border-color);
        }

        .auth-method-title {
            color: var(--accent-primary);
            margin-bottom: calc(var(--spacing-unit) * 3);
            font-size: 22px;
            font-weight: 700;
            font-family: var(--font-display);
            text-align: center;
        }

        .auth-method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: calc(var(--spacing-unit) * 2);
        }

        .auth-method-option {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .auth-method-option:hover {
            border-color: var(--accent-primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow-strong);
        }

        .auth-method-option.selected {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-strong);
            background: var(--input-bg);
        }

        .auth-method-price {
            color: var(--accent-primary);
            font-weight: 800;
            font-size: 20px;
            margin-top: calc(var(--spacing-unit) * 1.5);
            font-family: var(--font-display);
        }

        /* ========================================
           ENHANCED COPY BUTTON COMPONENT
        ======================================== */
        .copy-btn {
            background: var(--accent-primary);
            border: none;
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 3);
            color: #000;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            font-family: var(--font-primary);
            margin-left: calc(var(--spacing-unit) * 2);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-soft);
        }

        .copy-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
            transition: var(--transition);
            transform: translate(-50%, -50%);
        }

        .copy-btn:hover::before {
            width: 120px;
            height: 120px;
        }

        .copy-btn:hover {
            transform: scale(1.08);
            box-shadow: var(--shadow-strong);
        }

        .copy-btn.copied {
            background: var(--button-success);
            color: white;
        }

        /* ========================================
           PROFESSIONAL ORDER SUMMARY COMPONENTS
        ======================================== */
        .order-summary {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            margin-bottom: calc(var(--spacing-unit) * 4);
            border: 2px solid var(--border-color);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: calc(var(--spacing-unit) * 2);
            padding: calc(var(--spacing-unit) * 2) 0;
            font-size: 16px;
            font-weight: 500;
            font-family: var(--font-primary);
        }

        .summary-total {
            border-top: 2px solid var(--border-color);
            padding-top: calc(var(--spacing-unit) * 3);
            font-weight: 800;
            font-size: 28px;
            color: var(--accent-primary);
            font-family: var(--font-display);
        }

        /* ========================================
           ENHANCED TOAST NOTIFICATION SYSTEM
        ======================================== */
        .toast {
            position: fixed;
            top: calc(var(--spacing-unit) * 3);
            right: calc(var(--spacing-unit) * 3);
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            color: var(--text-primary);
            font-weight: 600;
            font-family: var(--font-primary);
            z-index: 10000;
            backdrop-filter: var(--backdrop-blur);
            box-shadow: var(--shadow-strong);
            animation: professionalScale 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 450px;
        }

        .toast.success {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .toast.error {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .toast.warning {
            border-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        /* ========================================
           LUXURY PRODUCT MANAGEMENT COMPONENTS
        ======================================== */
        .product-item {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3);
            margin-bottom: calc(var(--spacing-unit) * 2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid var(--border-color);
            transition: var(--transition);
        }

        .product-item:hover {
            border-color: var(--accent-primary);
            transform: translateX(calc(var(--spacing-unit) * 1));
            box-shadow: var(--shadow-soft);
        }

        .product-details {
            flex: 1;
        }

        .product-name {
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: calc(var(--spacing-unit) * 1);
            font-size: 18px;
            font-family: var(--font-primary);
        }

        .product-price {
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 600;
            font-family: var(--font-primary);
        }

        .product-image {
            max-width: 80px;
            max-height: 80px;
            border-radius: var(--border-radius-small);
            margin-right: calc(var(--spacing-unit) * 2);
        }

        .delete-btn {
            background: var(--button-secondary);
            border: none;
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 700;
            font-family: var(--font-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .delete-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-soft);
        }

        /* ========================================
           ENHANCED PAYMENT INFO DISPLAY
        ======================================== */
        .payment-info-card {
            background: var(--secondary-bg);
            padding: calc(var(--spacing-unit) * 4);
            border-radius: var(--border-radius);
            margin: calc(var(--spacing-unit) * 3) 0;
            border: 2px solid var(--border-color);
        }

        .payment-address {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--input-bg);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius-small);
            margin-top: calc(var(--spacing-unit) * 2);
            border: 2px solid var(--border-color);
        }

        .payment-address-text {
            font-weight: 700;
            color: var(--accent-primary);
            word-break: break-all;
            flex: 1;
            margin-right: calc(var(--spacing-unit) * 2);
            font-size: 16px;
            font-family: var(--font-mono);
        }

        /* ========================================
           SELECTION SUMMARY
        ======================================== */
        .selection-summary {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            margin-bottom: calc(var(--spacing-unit) * 4);
        }

        .selection-summary h4 {
            color: var(--accent-primary);
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-size: 22px;
            font-weight: 700;
            font-family: var(--font-display);
        }

        .selection-tag {
            display: inline-block;
            background: var(--accent-primary);
            color: #000;
            padding: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 2);
            border-radius: 25px;
            font-size: 12px;
            font-weight: 700;
            font-family: var(--font-primary);
            margin: calc(var(--spacing-unit) * 1) calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 1) 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: var(--transition);
        }

        .selection-tag:hover {
            transform: scale(1.05);
            animation: luxuryPulse 1.5s ease-in-out;
        }

        /* ========================================
           PROFESSIONAL THEME SELECTION
        ======================================== */
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: calc(var(--spacing-unit) * 2);
            margin-top: calc(var(--spacing-unit) * 3);
        }

        .theme-option {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .theme-option:hover {
            border-color: var(--accent-primary);
            transform: translateY(-5px);
            box-shadow: var(--shadow-strong);
        }

        .theme-option.selected {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-strong);
            background: var(--input-bg);
        }

        .theme-preview {
            width: 100%;
            height: 80px;
            border-radius: var(--border-radius-small);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        /* ========================================
           ENHANCED AUTHENTICATION FORMS
        ======================================== */
        .auth-tabs {
            display: flex;
            margin-bottom: calc(var(--spacing-unit) * 4);
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 2px solid var(--border-color);
        }

        .auth-tab {
            flex: 1;
            padding: calc(var(--spacing-unit) * 2);
            background: var(--input-bg);
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            font-weight: 600;
            font-family: var(--font-primary);
            transition: var(--transition);
        }

        .auth-tab.active {
            background: var(--accent-primary);
            color: #000;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: luxuryFadeIn 0.5s ease-out;
        }

        .google-btn {
            background: #db4437;
            border: none;
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 2.5) calc(var(--spacing-unit) * 4);
            color: white;
            font-weight: 700;
            font-family: var(--font-primary);
            cursor: pointer;
            width: 100%;
            margin-bottom: calc(var(--spacing-unit) * 2);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: calc(var(--spacing-unit) * 2);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
        }

        .google-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition);
        }

        .google-btn:hover::before {
            left: 100%;
        }

        .google-btn:hover {
            background: #c23321;
            transform: translateY(-3px);
            box-shadow: var(--shadow-strong);
        }

        /* ========================================
           LUXURY USER PROFILE CARD
        ======================================== */
        .user-profile {
            background: var(--secondary-bg);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 4);
            text-align: center;
            border: 2px solid var(--border-color);
            margin-bottom: calc(var(--spacing-unit) * 4);
        }

        .user-profile img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid var(--accent-primary);
            margin-bottom: calc(var(--spacing-unit) * 2);
            transition: var(--transition);
        }

        .user-profile img:hover {
            transform: scale(1.1);
            animation: sophisticatedFloat 3s ease-in-out infinite;
        }

        .user-profile h3 {
            color: var(--accent-primary);
            margin-bottom: calc(var(--spacing-unit) * 1);
            font-size: 28px;
            font-weight: 700;
            font-family: var(--font-display);
        }

        .user-profile p {
            color: var(--text-secondary);
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-weight: 500;
            font-family: var(--font-primary);
        }

        .logout-btn {
            background: var(--button-secondary);
            border: none;
            border-radius: var(--border-radius-small);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            color: white;
            cursor: pointer;
            font-weight: 700;
            font-family: var(--font-primary);
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .logout-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-soft);
        }

        /* ========================================
           LOADING ANIMATION
        ======================================== */
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 4px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent-primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ========================================
           USER UID DISPLAY STYLES
        ======================================== */
        .uid-display-card {
            background: var(--secondary-bg);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 3);
            margin-bottom: calc(var(--spacing-unit) * 3);
        }

        .uid-display {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--input-bg);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius-small);
            margin-top: calc(var(--spacing-unit) * 2);
            border: 2px solid var(--border-color);
        }

        .uid-text {
            font-weight: 700;
            color: var(--accent-primary);
            word-break: break-all;
            flex: 1;
            margin-right: calc(var(--spacing-unit) * 2);
            font-size: 14px;
            font-family: var(--font-mono);
        }

        /* ========================================
           RESPONSIVE DESIGN
        ======================================== */
        @media (max-width: 768px) {
            :root {
                --spacing-unit: 6px;
                --header-height: 70px;
                --sidebar-width: 300px;
                --content-max-width: 100%;
                --border-radius: 16px;
                --border-radius-small: 10px;
            }

            .header {
                padding: 0 calc(var(--spacing-unit) * 2);
            }

            .main-content {
                padding: calc(var(--spacing-unit) * 2);
            }

            .card {
                padding: calc(var(--spacing-unit) * 3);
            }

            .grid-2, 
            .grid-3 {
                grid-template-columns: 1fr;
            }

            .payment-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .auth-method-grid {
                grid-template-columns: 1fr;
            }

            .toast {
                right: calc(var(--spacing-unit) * 2);
                left: calc(var(--spacing-unit) * 2);
                max-width: none;
            }

            .user-info {
                font-size: 14px;
            }

            .theme-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .card-title {
                font-size: clamp(24px, 6vw, 32px);
            }

            .payment-address {
                flex-direction: column;
                gap: calc(var(--spacing-unit) * 2);
                text-align: center;
            }

            .copy-btn {
                margin-left: 0;
                width: 100%;
            }

            .logo {
                font-size: 24px;
            }

            .premium-status-indicator,
            .premium-mode-toggle {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: calc(var(--spacing-unit) * 2);
            }

            .premium-benefits-grid,
            .premium-pricing-grid {
                grid-template-columns: 1fr;
            }

            .variant-item {
                flex-direction: column;
                gap: calc(var(--spacing-unit) * 1);
                align-items: stretch;
                text-align: left;
            }

            .variant-remove-btn {
                align-self: flex-end;
                width: auto;
            }
        }

        @media (max-width: 480px) {
            :root {
                --spacing-unit: 5px;
                --border-radius: 14px;
                --border-radius-small: 8px;
            }

            .payment-grid {
                grid-template-columns: 1fr;
            }

            .theme-grid {
                grid-template-columns: 1fr;
            }

            .btn {
                padding: calc(var(--spacing-unit) * 2.5) calc(var(--spacing-unit) * 4);
                font-size: 14px;
            }

            .card {
                padding: calc(var(--spacing-unit) * 2.5);
            }

            .header {
                padding: calc(var(--spacing-unit) * 1.5);
            }

            .logo {
                font-size: 20px;
            }
        }

        /* ========================================
           ACCESSIBILITY IMPROVEMENTS
        ======================================== */
        @media (prefers-reduced-motion: reduce) {
            *, 
            *::before, 
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Enhanced focus styles for better accessibility */
        .btn:focus,
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus,
        .menu-btn:focus,
        .sidebar-item:focus {
            outline: 3px solid var(--accent-primary);
            outline-offset: 3px;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --border-color: rgba(255, 255, 255, 0.9);
                --text-secondary: #ffffff;
                --text-muted: #dddddd;
            }
        }

        /* Hide number input arrows */
        input[type=number]::-webkit-outer-spin-button,
        input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type=number] {
            -moz-appearance: textfield;
        }

        /* ========================================
           PERFORMANCE OPTIMIZATIONS
        ======================================== */
        .card,
        .selection-card,
        .payment-method {
            will-change: transform;
        }

        .sidebar {
            will-change: left;
        }

        /* Enable hardware acceleration for smooth animations */
        .btn,
        .menu-btn,
        .user-avatar,
        .logo {
            transform: translateZ(0);
        }

        /* ========================================
           THEME-SPECIFIC ENHANCEMENTS
        ======================================== */
        .theme-platinum-business .btn {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .theme-royal-emerald .selection-card:hover {
            animation: executiveGlow 2s ease-in-out infinite;
        }

        .theme-purple-royalty .card-title {
            font-family: 'Playfair Display', serif;
        }

        .theme-gold-standard .logo {
            text-shadow: 0 0 20px rgba(252, 211, 77, 0.5);
        }

        .theme-crimson-executive .btn:hover {
            animation: luxuryPulse 1s ease-in-out;
        }

        .theme-sunset-luxury .payment-method {
            border-radius: 28px;
        }
    </style>
</head>
<body class="theme-default">
    <!-- Premium Status Indicators -->
    <div id="premiumStatusIndicator" class="premium-status-indicator">
         PREMIUM PRO ACTIVE
    </div>
    
    <div id="premiumModeToggle" class="premium-mode-toggle">
        <div style="color: var(--text-primary); font-weight: 700; margin-bottom: 12px; text-align: center;">Mode</div>
        <div>
            <button class="mode-toggle-btn active" onclick="toggleProMode('basic')">Basic Pro</button>
            <button class="mode-toggle-btn" onclick="toggleProMode('premium')">Premium Pro</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-analytics.js";
        import {
            getAuth,
            signInWithPopup,
            GoogleAuthProvider,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            sendPasswordResetEmail,
            signOut,
            onAuthStateChanged,
            updateProfile
        } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
        import {
            getFirestore,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            query,
            where,
            collection,
            getDocs,
            serverTimestamp,
            Timestamp
        } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD_qoK04uYVUFT1fRX0dM8m8NUzhP0rZeo",
            authDomain: "aunix-studio.firebaseapp.com",
            projectId: "aunix-studio",
            storageBucket: "aunix-studio.firebasestorage.app",
            messagingSenderId: "160031030915",
            appId: "1:160031030915:web:c22575722a08bebf7fe5b6",
            measurementId: "G-CRK58J9P7K"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const googleProvider = new GoogleAuthProvider();

        // Configure Google provider for better UX
        googleProvider.addScope('email');
        googleProvider.addScope('profile');
        googleProvider.setCustomParameters({
            'prompt': 'select_account'
        });

        // Make Firebase services available globally
        window.firebaseAuth = {
            auth,
            googleProvider,
            signInWithPopup,
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword,
            sendPasswordResetEmail,
            signOut,
            onAuthStateChanged,
            updateProfile
        };

        window.firestoreDB = {
            db,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            query,
            where,
            collection,
            getDocs,
            serverTimestamp,
            Timestamp
        };

        // Initialize auth state listener
        onAuthStateChanged(auth, (user) => {
            window.currentUser = user;
            updateUserInterface(user);
            if (user) {
                autoFillUserData(user);
                loadTheme();
                // Load and sync premium status when user logs in
                syncPremiumStatusWithFirestore(user);
                console.log(' User authenticated:', {
                    name: user.displayName,
                    email: user.email,
                    uid: user.uid
                });
            } else {
                console.log(' User signed out');
            }
        });

        console.log(' Firebase initialized successfully with Firestore');
    </script>

    <!-- Header Section -->
    <header class="header" role="banner">
        <button class="menu-btn" onclick="toggleSidebar()" aria-label="Toggle navigation menu">
            <div class="menu-line"></div>
            <div class="menu-line"></div>
            <div class="menu-line"></div>
        </button>
        <div class="logo">Aunix Studio Pro</div>
        <div id="userSection">
            <button class="login-btn" onclick="showPage('account')">Login / Sign Up</button>
        </div>
    </header>

    <!-- Navigation Sidebar -->
    <nav class="sidebar" id="sidebar" role="navigation">
        <a class="sidebar-item" href="#" onclick="showPage('home')" role="menuitem"> Home</a>
        <a class="sidebar-item" href="#" onclick="showPage('services')" role="menuitem"> Services</a>
        <a class="sidebar-item" href="#" onclick="showPage('products')" role="menuitem"> Products</a>
        <a class="sidebar-item" href="#" onclick="showPage('add-missed-product')" role="menuitem"> Add Missed Product</a>
        <a class="sidebar-item" href="#" onclick="showPage('buy-premium-pro')" role="menuitem"> Buy Premium Pro</a>
        <a class="sidebar-item" href="#" onclick="showPage('unlock-premium')" role="menuitem"> Unlock Premium</a>
        <a class="sidebar-item" href="#" onclick="showPage('terms')" role="menuitem"> Terms & Conditions</a>
        <a class="sidebar-item" href="#" onclick="showPage('privacy')" role="menuitem"> Privacy Policy</a>
        <a class="sidebar-item" href="#" onclick="showPage('account')" role="menuitem"> My Account</a>
    </nav>

    <!-- Main Content -->
    <main class="main-content" role="main">
        <!-- Home Page -->
        <section class="page active" id="home">
            <article class="card">
                <h1 class="card-title">Premium Development Services</h1>
                <p style="text-align: center; margin-bottom: 32px; color: var(--text-secondary); font-size: 18px; font-weight: 500; line-height: 1.6;">
                    Transform your vision into reality with our professional website and app development services, crafted with precision and luxury.
                </p>
                <div class="grid grid-2">
                    <div class="card">
                        <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> Premium Features</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 16px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 16px; font-size: 20px;"></span>
                                Professional Website Development
                            </li>
                            <li style="padding: 16px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 16px; font-size: 20px;"></span>
                                Custom Mobile App Creation
                            </li>
                            <li style="padding: 16px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 16px; font-size: 20px;"></span>
                                Premium Design Templates
                            </li>
                            <li style="padding: 16px 0; color: var(--text-secondary); display: flex; align-items: center; font-weight: 500;">
                                <span style="color: var(--accent-primary); margin-right: 16px; font-size: 20px;"></span>
                                24/7 Customer Support
                            </li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> Featured Product</h3>
                        <div style="text-align: center;">
                            <h4 style="color: var(--text-primary); margin-bottom: 12px; font-weight: 600; font-size: 20px;">Aunix Premium Account</h4>
                            <p style="color: var(--accent-primary); font-size: 42px; font-weight: 800; margin: 20px 0; font-family: var(--font-display);" id="homeProductPrice">120 TK</p>
                            <button class="btn btn-primary" onclick="showPage('products')">Get Premium</button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3 style="color: var(--accent-primary); margin-bottom: 32px; text-align: center; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> Contact & About</h3>
                    <div style="text-align: center; color: var(--text-secondary); font-size: 16px; font-weight: 500; line-height: 1.8;">
                        <p style="margin-bottom: 16px;"> Email: aunixbdonlinestore@gmail.com</p>
                        <p style="margin-bottom: 16px;" class="branding-text"> Made by Aunix Studios Team</p>
                        <p>Aunix Studios specializes in creating premium websites and mobile apps tailored to your business needs with innovative design and full support.</p>
                    </div>
                </div>
            </article>
        </section>

        <!-- Add Missed Product Page -->
        <section class="page" id="add-missed-product">
            <article class="card">
                <h1 class="card-title"> Add Missed Product</h1>
                <p style="text-align: center; margin-bottom: 32px; color: var(--text-secondary); font-size: 18px; font-weight: 500; line-height: 1.6;">
                    Missed adding products during your website or app order? No problem! Add them here and we'll include them in your project.
                </p>

                <!-- Product Limits Information -->
                <div class="missed-product-limits">
                    <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-size: 20px; font-weight: 700; font-family: var(--font-display);">Product & Variant Limits</h3>
                    <div class="grid grid-2">
                        <div class="missed-product-counter" id="productCounter">
                            <span>Products Added:</span>
                            <span><span id="productCount">0</span> / <span id="maxProducts">45</span></span>
                        </div>
                        <div class="missed-product-counter">
                            <span>Variants per Product:</span>
                            <span>Max <span id="maxVariants">5</span></span>
                        </div>
                    </div>
                    <div style="margin-top: 16px; padding: 16px; background: var(--input-bg); border-radius: var(--border-radius-small); text-align: center;">
                        <p style="color: var(--text-secondary); font-weight: 500;" id="limitsText">
                            Normal users can add up to 45 products with 5 variants each. Premium Pro users get 75 products with 15 variants each.
                        </p>
                    </div>
                </div>

                <!-- Order Information -->
                <div class="card">
                    <h2 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);">Order Information</h2>
                    <div class="grid grid-3">
                        <div class="form-group">
                            <label class="form-label" for="missedProductEmail">Email Address *</label>
                            <input type="email" class="form-input" id="missedProductEmail" name="email" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="missedProductOrderId">Order ID *</label>
                            <input type="text" class="form-input" id="missedProductOrderId" name="order_id" placeholder="Enter your order ID" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="missedProductStoreName">Store Name *</label>
                            <input type="text" class="form-input" id="missedProductStoreName" name="store_name" placeholder="Enter your store name" required>
                        </div>
                    </div>
                </div>

                <!-- Product Addition Section -->
                <div class="card" id="missedProductAddition">
                    <h2 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);">Add Products</h2>
                    
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label class="form-label" for="missedProductName">Product Name *</label>
                            <input type="text" class="form-input" id="missedProductName" placeholder="Enter product name">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="missedProductPrice">Product Price (TK) *</label>
                            <input type="number" class="form-input" id="missedProductPrice" placeholder="Enter price" min="0">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="missedProductImage">Product Image URL</label>
                        <input type="url" class="form-input" id="missedProductImage" placeholder="Enter image URL (optional)">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="missedProductDescription">Product Description</label>
                        <textarea class="form-textarea" id="missedProductDescription" placeholder="Enter product description (optional)"></textarea>
                    </div>

                    <!-- Variants Section -->
                    <div class="form-group">
                        <label class="form-label">Product Variants (Optional)</label>
                        <div id="variantsContainer">
                            <p style="color: var(--text-secondary); margin-bottom: 16px; font-weight: 500;">
                                Add variants like different sizes, colors, or specifications for this product.
                            </p>
                        </div>
                        <button type="button" class="add-variant-btn" onclick="addVariant()" id="addVariantBtn">
                            + Add Variant
                        </button>
                    </div>

                    <div style="text-align: center; margin-top: 24px;">
                        <button class="btn btn-secondary" onclick="addMissedProduct()" id="addMissedProductBtn">+ Add Product</button>
                    </div>
                </div>

                <!-- Added Products List -->
                <div class="card" id="missedProductsList" style="display: none;">
                    <h2 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);">Added Products</h2>
                    <div id="missedProductsContent"></div>
                </div>

                <!-- Submit Section -->
                <div class="card">
                    <h2 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);">Submit Missed Products</h2>
                    <form action="https://formspree.io/f/xldlgrnl" method="POST" id="missedProductForm">
                        <input type="hidden" name="form_type" value="missed_products">
                        <input type="hidden" name="products_data" id="missedProductsData">
                        <input type="hidden" name="total_products" id="totalMissedProducts">
                        <input type="hidden" name="user_email" id="missedProductUserEmail">
                        <input type="hidden" name="user_uid" id="missedProductUserUID">
                        <input type="hidden" name="is_premium" id="missedProductIsPremium">

                        <div style="background: var(--secondary-bg); border: 2px solid var(--border-color); border-radius: var(--border-radius); padding: 24px; margin-bottom: 24px; text-align: center;">
                            <p style="color: var(--text-secondary); font-weight: 500; margin-bottom: 16px;">
                                Review your information and products before submitting. Make sure all details are correct.
                            </p>
                            <div style="color: var(--accent-primary); font-size: 18px; font-weight: 700;">
                                Total Products: <span id="submitProductCount">0</span>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;" id="submitMissedProductsBtn" disabled>
                            Submit Missed Products
                        </button>
                    </form>
                </div>
            </article>
        </section>

        <!-- Buy Premium Pro Page -->
        <section class="page" id="buy-premium-pro">
            <article class="card">
                <h1 class="card-title"> Premium Pro System</h1>
                <p style="text-align: center; margin-bottom: 32px; color: var(--text-secondary); font-size: 18px; font-weight: 500; line-height: 1.6;">
                    Unlock exclusive benefits with our Premium Pro membership and enjoy the best discounts, priority support, and premium features.
                </p>

                <!-- Premium Benefits -->
                <div class="card">
                    <h2 style="color: var(--accent-primary); text-align: center; margin-bottom: 32px; font-size: 32px; font-weight: 800; font-family: var(--font-display);">Premium Pro Benefits</h2>
                    <div class="premium-benefits-grid">
                        <div class="benefit-card">
                            <span class="benefit-icon"></span>
                            <h3 class="benefit-title">Best Discounts</h3>
                            <p class="benefit-description">Get 35% discount on all services and products with Premium Pro membership</p>
                        </div>
                        <div class="benefit-card">
                            <span class="benefit-icon"></span>
                            <h3 class="benefit-title">Priority Support</h3>
                            <p class="benefit-description">Skip the queue with priority customer support and faster response times</p>
                        </div>
                        <div class="benefit-card">
                            <span class="benefit-icon"></span>
                            <h3 class="benefit-title">No Branding</h3>
                            <p class="benefit-description">Remove all "Made by Aunix Studios" branding from your projects</p>
                        </div>
                        <div class="benefit-card">
                            <span class="benefit-icon"></span>
                            <h3 class="benefit-title">Best Quality Products</h3>
                            <p class="benefit-description">Access to premium templates, advanced features, and premium quality output</p>
                        </div>
                        <div class="benefit-card">
                            <span class="benefit-icon"></span>
                            <h3 class="benefit-title">Fast Delivery</h3>
                            <p class="benefit-description">Get your projects delivered faster with priority processing queue</p>
                        </div>
                        <div class="benefit-card">
                            <span class="benefit-icon"></span>
                            <h3 class="benefit-title">Better UI & Functionality</h3>
                            <p class="benefit-description">Access to premium UI modes, advanced functionality, and exclusive features</p>
                        </div>
                    </div>
                </div>

                <!-- Premium Pricing -->
                <div class="card">
                    <h2 style="color: var(--accent-primary); text-align: center; margin-bottom: 32px; font-size: 32px; font-weight: 800; font-family: var(--font-display);">Premium Pro Pricing</h2>
                    <div class="premium-pricing-grid">
                        <div class="pricing-card" onclick="selectPremiumDuration('7-days', 70)">
                            <div class="pricing-duration">7 Days</div>
                            <div class="pricing-amount">70</div>
                        </div>
                        <div class="pricing-card" onclick="selectPremiumDuration('30-days', 130)">
                            <div class="pricing-duration">30 Days</div>
                            <div class="pricing-amount">130</div>
                            <div class="pricing-discount">Most Popular</div>
                        </div>
                        <div class="pricing-card" onclick="selectPremiumDuration('3-months', 330)">
                            <div class="pricing-duration">3 Months</div>
                            <div class="pricing-amount">330</div>
                            <div class="pricing-discount">20% Save</div>
                        </div>
                        <div class="pricing-card" onclick="selectPremiumDuration('1-year', 670)">
                            <div class="pricing-duration">1 Year</div>
                            <div class="pricing-amount">670</div>
                            <div class="pricing-discount">Best Value</div>
                        </div>
                        <div class="pricing-card" onclick="selectPremiumDuration('3-years', 1290)">
                            <div class="pricing-duration">3 Years</div>
                            <div class="pricing-amount">1290</div>
                            <div class="pricing-discount">Maximum Save</div>
                        </div>
                    </div>
                </div>

                <!-- Premium Pro Order Form -->
                <div class="card">
                    <h2 style="color: var(--accent-primary); text-align: center; margin-bottom: 32px; font-size: 28px; font-weight: 700; font-family: var(--font-display);">Purchase Premium Pro</h2>
                    <form action="https://formspree.io/f/xldlgrnl" method="POST" id="premiumProForm">
                        <input type="hidden" name="product" value="Premium Pro Membership">
                        <input type="hidden" name="duration" id="premiumDuration">
                        <input type="hidden" name="price" id="premiumPrice">
                        <input type="hidden" name="userEmail" id="premiumProUserEmail">
                        <input type="hidden" name="userUID" id="premiumProUserUID">

                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label" for="premiumProName">Full Name *</label>
                                <input type="text" class="form-input" id="premiumProName" name="customer_name" placeholder="Enter your full name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="premiumProEmail">Email Address *</label>
                                <input type="email" class="form-input" id="premiumProEmail" name="customer_email" placeholder="Enter your email" required>
                            </div>
                        </div>

                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label" for="premiumProPhone">Phone Number *</label>
                                <input type="text" class="form-input" id="premiumProPhone" name="customer_phone" placeholder="Enter your phone number" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="premiumProUID">Your User ID (UID) *</label>
                                <input type="text" class="form-input" id="premiumProUID" name="customer_uid" placeholder="Enter your UID from account page" required>
                                <p style="color: var(--text-muted); font-size: 12px; margin-top: 8px; font-weight: 500;">
                                    Find your UID in the Account page after logging in
                                </p>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="premiumProPaymentMethod">Select Payment Method *</label>
                            <select class="form-select" id="premiumProPaymentMethod" name="payment_method" onchange="showPremiumProPaymentInfo()" required>
                                <option value="">Choose Payment Method</option>
                                <option value="bkash">bKash</option>
                                <option value="nagad">Nagad</option>
                                <option value="rocket">Rocket</option>
                                <option value="btc">Bitcoin (BTC)</option>
                                <option value="ltc">Litecoin (LTC)</option>
                            </select>
                        </div>

                        <div id="premiumProPaymentInfo"></div>
                        <div id="deliveryNotice" class="delivery-notice" style="display: none;">
                            <div class="delivery-notice-title"> Delivery Information</div>
                            <div class="delivery-notice-text" id="deliveryText"></div>
                        </div>

                        <div class="form-group" id="premiumProTransactionGroup" style="display: none;">
                            <label class="form-label" id="premiumProTransactionLabel">Transaction ID *</label>
                            <input type="text" class="form-input" id="premiumProTransactionId" name="transaction_id" placeholder="Enter transaction ID" required>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;" disabled id="premiumProSubmitBtn">Select Duration and Payment Method</button>
                    </form>
                </div>
            </article>
        </section>

        <!-- Unlock Premium Page -->
        <section class="page" id="unlock-premium">
            <article class="card">
                <h1 class="card-title"> Unlock Premium Pro</h1>
                
                <!-- Premium Status Display -->
                <div id="premiumStatusDisplay" style="display: none;">
                    <div class="premium-status-card">
                        <div class="premium-status-title"> Premium Pro Active!</div>
                        <div class="premium-expiry" id="premiumExpiryDisplay"></div>
                        <div class="premium-features-list">
                            <div class="premium-feature">
                                <span class="premium-feature-icon"></span>
                                <span>35% Discount on All Services</span>
                            </div>
                            <div class="premium-feature">
                                <span class="premium-feature-icon"></span>
                                <span>Priority Support</span>
                            </div>
                            <div class="premium-feature">
                                <span class="premium-feature-icon"></span>
                                <span>No Branding</span>
                            </div>
                            <div class="premium-feature">
                                <span class="premium-feature-icon"></span>
                                <span>Premium Quality</span>
                            </div>
                            <div class="premium-feature">
                                <span class="premium-feature-icon"></span>
                                <span>Fast Delivery</span>
                            </div>
                            <div class="premium-feature">
                                <span class="premium-feature-icon"></span>
                                <span>Better UI & Functionality</span>
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="deactivatePremium()" style="margin-top: 20px;">Deactivate Premium</button>
                    </div>
                </div>

                <!-- Premium Code Input -->
                <div id="premiumCodeSection">
                    <p style="text-align: center; margin-bottom: 32px; color: var(--text-secondary); font-size: 18px; font-weight: 500; line-height: 1.6;">
                        Enter your Premium Pro code to unlock exclusive benefits and features.
                    </p>
                    
                    <div class="form-group">
                        <label class="form-label" for="premiumCode" style="text-align: center; display: block;">Premium Pro Code</label>
                        <input type="text" class="form-input premium-code-input" id="premiumCode" placeholder="ENTER-PREMIUM-CODE" maxlength="50">
                    </div>
                    
                    <button class="btn btn-primary" onclick="unlockPremiumWithFirestore()" style="width: 100%; margin-top: 20px;">Unlock Premium Pro</button>
                    
                    <div style="text-align: center; margin-top: 32px; padding: 24px; background: var(--secondary-bg); border-radius: var(--border-radius); border: 2px solid var(--border-color);">
                        <h3 style="color: var(--accent-primary); margin-bottom: 16px; font-weight: 700; font-family: var(--font-display);">Don't have a Premium Pro code?</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; font-weight: 500;">Purchase Premium Pro membership to get your activation code</p>
                        <button class="btn btn-secondary" onclick="showPage('buy-premium-pro')">Buy Premium Pro</button>
                    </div>
                </div>
            </article>
        </section>

        <!-- Services Page -->
        <section class="page" id="services">
            <article class="card">
                <h1 class="card-title">Our Premium Services</h1>
                <div class="grid grid-2">
                    <div class="selection-card" onclick="startOrder('website')">
                        <h3 style="font-size: 28px; margin-bottom: 16px; font-weight: 700; font-family: var(--font-display);"> Website Development</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; font-weight: 500;">Professional websites for your business</p>
                        <p style="color: var(--accent-primary); font-weight: 800; font-size: 32px; font-family: var(--font-display);" id="websitePrice">999 TK</p>
                    </div>
                    <div class="selection-card" onclick="startOrder('app')">
                        <h3 style="font-size: 28px; margin-bottom: 16px; font-weight: 700; font-family: var(--font-display);"> App Development</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; font-weight: 500;">Custom mobile applications</p>
                        <p style="color: var(--accent-primary); font-weight: 800; font-size: 32px; font-family: var(--font-display);" id="appPrice">1120 TK</p>
                    </div>
                </div>
            </article>

            <!-- Order Process -->
            <section id="orderProcess" style="display: none;">
                <!-- Selection Summary -->
                <article class="selection-summary" id="selectionSummary" style="display: none;">
                    <h4>Your Selections</h4>
                    <div id="summaryContent"></div>
                </article>

                <!-- Category Selection -->
                <article class="card" id="categorySelection">
                    <h2 class="card-title">Choose Your Category</h2>
                    <div class="grid grid-3">
                        <div class="selection-card" onclick="selectCategory('clothing')">
                            <h3 style="font-weight: 700; font-family: var(--font-display);"> Clothing Store</h3>
                            <p style="color: var(--text-secondary); font-weight: 500;">Fashion and apparel business</p>
                        </div>
                        <div class="selection-card" onclick="selectCategory('subscription')">
                            <h3 style="font-weight: 700; font-family: var(--font-display);"> Subscription & ACC Selling</h3>
                            <p style="color: var(--text-secondary); font-weight: 500;">Subscription-based services</p>
                        </div>
                        <div class="selection-card" onclick="selectCategory('computer')">
                            <h3 style="font-weight: 700; font-family: var(--font-display);"> Computer Store</h3>
                            <p style="color: var(--text-secondary); font-weight: 500;">Technology and hardware</p>
                        </div>
                    </div>
                </article>

                <!-- Format Selection (App Only) -->
                <article class="card" id="formatSelection" style="display: none;">
                    <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> Select App Format</h3>
                    <div class="grid grid-3">
                        <div class="selection-card" onclick="selectFormat('apk')">
                            <div style="font-size: 22px; font-weight: 700; margin-bottom: 12px; font-family: var(--font-display);">APK</div>
                            <div style="color: var(--text-secondary); font-weight: 500;">Android Package Kit - Standard Android app format</div>
                        </div>
                        <div class="selection-card" onclick="selectFormat('aab')">
                            <div style="font-size: 22px; font-weight: 700; margin-bottom: 12px; font-family: var(--font-display);">AAB</div>
                            <div style="color: var(--text-secondary); font-weight: 500;">Android App Bundle - Optimized for Google Play Store</div>
                        </div>
                        <div class="selection-card" onclick="selectFormat('ios')">
                            <div style="font-size: 22px; font-weight: 700; margin-bottom: 12px; font-family: var(--font-display);">iOS</div>
                            <div style="color: var(--text-secondary); font-weight: 500;">iOS App Package - For Apple App Store and TestFlight</div>
                        </div>
                    </div>
                </article>

                <!-- Page Selection -->
                <article class="card" id="pageSelection" style="display: none;">
                    <h2 class="card-title">Select Pages</h2>
                    <div class="form-group">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-weight: 700; font-family: var(--font-display);">Default Pages (Now Selectable)</h3>
                        <ul class="feature-list">
                            <li class="feature-item">
                                <span>Home Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                                    <input type="checkbox" class="feature-checkbox" name="defaultPages" value="home" data-price="0" onchange="updateSelections()" checked>
                                </div>
                            </li>
                            <li class="feature-item">
                                <span>Products Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                                    <input type="checkbox" class="feature-checkbox" name="defaultPages" value="products" data-price="0" onchange="updateSelections()" checked>
                                </div>
                            </li>
                            <li class="feature-item">
                                <span>Cart Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                                    <input type="checkbox" class="feature-checkbox" name="defaultPages" value="cart" data-price="0" onchange="updateSelections()" checked>
                                </div>
                            </li>
                            <li class="feature-item">
                                <span>Terms of Service Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                                    <input type="checkbox" class="feature-checkbox" name="defaultPages" value="terms" data-price="0" onchange="updateSelections()" checked>
                                </div>
                            </li>
                            <li class="feature-item">
                                <span>About Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                                    <input type="checkbox" class="feature-checkbox" name="defaultPages" value="about" data-price="0" onchange="updateSelections()" checked>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-weight: 700; font-family: var(--font-display);">Custom Pages (Optional)</h3>
                        <ul class="feature-list">
                            <li class="feature-item">
                                <span>Socials Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); margin-right: 16px; font-weight: 700;" id="socialsPagePrice">+90 TK</span>
                                    <input type="checkbox" class="feature-checkbox" name="pages" value="socials" data-price="90" onchange="updateSelections()">
                                </div>
                            </li>
                            <li class="feature-item">
                                <span>Customer Page</span>
                                <div style="display: flex; align-items: center;">
                                    <span style="color: var(--accent-primary); margin-right: 16px; font-weight: 700;" id="customerPagePrice">+67 TK</span>
                                    <input type="checkbox" class="feature-checkbox" name="pages" value="customer" data-price="67" onchange="updateSelections()">
                                </div>
                            </li>
                        </ul>
                    </div>
                    <button class="btn btn-primary" onclick="showFeatures()">Continue to Features</button>
                </article>

                <!-- Features Selection -->
                <article class="card" id="featuresSelection" style="display: none;">
                    <h2 class="card-title">Select Features</h2>
                    <div id="categoryFeatures"></div>
                    <button class="btn btn-primary" onclick="showBenefits()">Continue to Benefits</button>
                </article>

                <!-- Benefits Selection -->
                <article class="card" id="benefitsSelection" style="display: none;">
                    <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> Additional Benefits</h3>
                    <div class="feature-item">
                        <div>
                            <div style="font-weight: 700; color: var(--text-primary);">Remove Branding</div>
                            <div style="font-size: 14px; color: var(--text-secondary); margin-top: 6px; font-weight: 500;">Remove "Made By Aunix Studios" from your website/app</div>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <div style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;" id="brandingPrice">+100 TK</div>
                            <input type="checkbox" class="feature-checkbox" name="benefits" value="remove-branding" data-price="100" onchange="updateSelections()">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showProducts()">Continue to Products</button>
                </article>

                <!-- Product Management -->
                <article class="card" id="productManagement" style="display: none;">
                    <h2 class="card-title">Manage Your Products</h2>
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label class="form-label" for="productName">Product Name</label>
                            <input type="text" class="form-input" id="productName" placeholder="Enter product name">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="productPrice">Product Price (TK)</label>
                            <input type="number" class="form-input" id="productPrice" placeholder="Enter price">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productImageUrl">Product Image URL</label>
                        <input type="url" class="form-input" id="productImageUrl" placeholder="Enter image URL (e.g., https://example.com/image.jpg)">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productDescription">Product Description</label>
                        <textarea class="form-textarea" id="productDescription" placeholder="Enter product description"></textarea>
                    </div>
                    <button class="btn btn-secondary" onclick="addProduct()">+ Add Product</button>
                    <div id="productList" style="margin-top: 32px;"></div>
                    <button class="btn btn-primary" onclick="showPaymentMethods()" style="margin-top: 32px;">Continue to Payment Methods</button>
                </article>

                <!-- Payment Methods Selection for Website/App -->
                <article class="card" id="paymentMethodsSelection" style="display: none;">
                    <h2 class="card-title">Setup Payment Methods for Your Website/App</h2>
                    <p style="text-align: center; margin-bottom: 32px; color: var(--text-secondary); font-weight: 500;">
                        Select and configure payment methods that your customers will use to pay you
                    </p>
                    <div class="form-group">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-weight: 700; font-family: var(--font-display);">Bangladesh (Mobile Banking)</h3>
                        <div class="payment-grid">
                            <div class="payment-method" onclick="selectPaymentMethod('bkash')">
                                <h4>bKash</h4>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('nagad')">
                                <h4>Nagad</h4>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('rocket')">
                                <h4>Rocket</h4>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-weight: 700; font-family: var(--font-display);">Cryptocurrency</h3>
                        <div class="payment-grid">
                            <div class="payment-method" onclick="selectPaymentMethod('btc')">
                                <h4>Bitcoin</h4>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('ltc')">
                                <h4>Litecoin</h4>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('ethereum')">
                                <h4>Ethereum</h4>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('solana')">
                                <h4>Solana</h4>
                            </div>
                        </div>
                    </div>
                    <div id="paymentDetails"></div>
                    
                    <!-- Website Authentication Methods (Only for Website Orders) -->
                    <div class="auth-method-selection" id="websiteAuthMethods" style="display: none;">
                        <h4 class="auth-method-title"> Select Login Methods for Your Website</h4>
                        <p style="text-align: center; margin-bottom: 24px; color: var(--text-secondary); font-weight: 500;">
                            Choose how your customers will authenticate on your website
                        </p>
                        <div class="auth-method-grid">
                            <div class="auth-method-option" onclick="selectAuthMethod('google')">
                                <h5 style="font-weight: 700;"> Google Sign-In</h5>
                                <p style="color: var(--text-secondary); font-size: 14px; margin: 12px 0;">One-click Google authentication</p>
                                <div class="auth-method-price" id="googleAuthPrice">+23 TK</div>
                            </div>
                            <div class="auth-method-option" onclick="selectAuthMethod('email')">
                                <h5 style="font-weight: 700;"> Email/Password</h5>
                                <p style="color: var(--text-secondary); font-size: 14px; margin: 12px 0;">Traditional email signup/login</p>
                                <div class="auth-method-price">FREE</div>
                            </div>
                        </div>
                        <div id="firebaseInfoSection" style="display: none; margin-top: 24px;">
                            <h5 style="color: var(--accent-primary); margin-bottom: 16px; font-weight: 700; font-family: var(--font-display);">Firebase Configuration Required</h5>
                            <p style="color: var(--text-secondary); margin-bottom: 20px; font-weight: 500;">
                                Please provide your Firebase project details for authentication setup:
                            </p>
                            <div class="grid grid-2">
                                <div class="form-group">
                                    <label class="form-label" for="firebaseGmail">Firebase Gmail Account</label>
                                    <input type="email" class="form-input" id="firebaseGmail" placeholder="Your Firebase account Gmail">
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="firebasePassword">Firebase Password</label>
                                    <input type="password" class="form-input" id="firebasePassword" placeholder="Your Firebase account password">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="showOrderDetails()">Continue to Order</button>
                </article>

                <!-- Order Details -->
                <article class="card" id="orderDetails" style="display: none;">
                    <h2 class="card-title">Complete Your Order</h2>
                    <div class="order-summary">
                        <h3 style="color: var(--accent-primary); margin-bottom: 20px; font-size: 22px; font-weight: 700; font-family: var(--font-display);">Order Summary</h3>
                        <div id="orderSummaryContent"></div>
                    </div>
                    <form action="https://formspree.io/f/xldlgrnl" method="POST" id="orderForm">
                        <!-- Hidden fields for all selections -->
                        <input type="hidden" name="orderType" id="orderType">
                        <input type="hidden" name="orderCategory" id="orderCategory">
                        <input type="hidden" name="orderFormat" id="orderFormat">
                        <input type="hidden" name="selectedPages" id="selectedPages">
                        <input type="hidden" name="selectedFeatures" id="selectedFeatures">
                        <input type="hidden" name="selectedBenefits" id="selectedBenefits">
                        <input type="hidden" name="customerPaymentMethods" id="customerPaymentMethods">
                        <input type="hidden" name="selectedAuthMethods" id="selectedAuthMethods">
                        <input type="hidden" name="firebaseInfo" id="firebaseInfo">
                        <input type="hidden" name="orderProducts" id="orderProducts">
                        <input type="hidden" name="orderTotal" id="orderTotal">
                        <input type="hidden" name="userEmail" id="userEmail">
                        <input type="hidden" name="userUID" id="userUID">
                        <input type="hidden" name="isPremiumUser" id="isPremiumUser">
                        <input type="hidden" name="appliedDiscount" id="appliedDiscount">

                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label" for="orderId">Order ID</label>
                                <div style="display: flex; align-items: center;">
                                    <input type="text" class="form-input" id="orderId" name="orderId" readonly style="flex: 1;">
                                    <button type="button" class="copy-btn" onclick="copyToClipboard('orderId')">Copy</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="orderProductName">Product Name</label>
                                <input type="text" class="form-input" id="orderProductName" name="orderProductName" readonly>
                            </div>
                        </div>

                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label" for="customerName">Customer Name *</label>
                                <input type="text" class="form-input" id="customerName" name="customerName" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="customerEmail">Email Address *</label>
                                <input type="email" class="form-input" id="customerEmail" name="customerEmail" required>
                            </div>
                        </div>

                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label" for="storeName">Store Name *</label>
                                <input type="text" class="form-input" id="storeName" name="storeName" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="customerCountry">Country</label>
                                <input type="text" class="form-input" id="customerCountry" name="customerCountry">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="orderPaymentMethod">Select Payment Method for This Order *</label>
                            <select class="form-select" id="orderPaymentMethod" name="orderPaymentMethod" onchange="showPaymentInfo()" required>
                                <option value="">Choose Payment Method</option>
                                <option value="bkash">bKash</option>
                                <option value="nagad">Nagad</option>
                                <option value="rocket">Rocket</option>
                                <option value="btc">Bitcoin (BTC)</option>
                                <option value="ltc">Litecoin (LTC)</option>
                            </select>
                        </div>

                        <div id="paymentInfo" style="display: none;"></div>

                        <div class="form-group" id="transactionGroup" style="display: none;">
                            <label class="form-label" id="transactionLabel">Transaction ID *</label>
                            <input type="text" class="form-input" id="transactionId" name="transactionId" required>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Order</button>
                    </form>
                </article>
            </section>
        </section>

        <!-- Products Page -->
        <section class="page" id="products">
            <article class="card">
                <h1 class="card-title">Premium Products</h1>
                <div class="card">
                    <h3 style="color: var(--accent-primary); text-align: center; font-size: 28px; margin-bottom: 20px; font-weight: 700; font-family: var(--font-display);">Aunix Premium Account</h3>
                    <p style="text-align: center; margin: 32px 0; color: var(--text-secondary); font-size: 16px; font-weight: 500;">
                        Get access to premium features, exclusive content, and priority support
                    </p>
                    <div style="text-align: center; margin: 32px 0;">
                        <span style="font-size: 48px; color: var(--accent-primary); font-weight: 800; font-family: var(--font-display);" id="productPagePrice">120 TK</span>
                    </div>
                    <form action="https://formspree.io/f/xldlgrnl" method="POST" id="premiumForm">
                        <input type="hidden" name="product" value="Aunix Premium Account">
                        <input type="hidden" name="price" value="120">
                        <input type="hidden" name="userEmail" id="premiumUserEmail">
                        <input type="hidden" name="userUID" id="premiumUserUID">

                        <div class="form-group">
                            <label class="form-label" for="premiumEmailInput">Email Address *</label>
                            <input type="email" class="form-input" id="premiumEmailInput" name="email" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="premiumPhoneInput">Phone Number *</label>
                            <input type="text" class="form-input" id="premiumPhoneInput" name="phone" placeholder="Enter your phone number" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="premiumPaymentMethod">Select Payment Method</label>
                            <select class="form-select" id="premiumPaymentMethod" name="payment_method" onchange="showPremiumPaymentInfo()" required>
                                <option value="">Choose Payment Method</option>
                                <option value="bkash">bKash</option>
                                <option value="nagad">Nagad</option>
                                <option value="rocket">Rocket</option>
                                <option value="btc">Bitcoin (BTC)</option>
                                <option value="ltc">Litecoin (LTC)</option>
                            </select>
                        </div>
                        <div id="premiumPaymentInfo"></div>
                        <div class="form-group" id="premiumTransactionGroup" style="display: none;">
                            <label class="form-label" id="premiumTransactionLabel">Transaction ID *</label>
                            <input type="text" class="form-input" id="premiumTransactionId" name="transaction_id">
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Purchase Premium</button>
                    </form>
                </div>
            </article>
        </section>

        <!-- Terms & Conditions Page -->
        <section class="page" id="terms">
            <article class="card">
                <h1 class="card-title">Terms & Conditions</h1>
                <div style="color: var(--text-secondary); line-height: 1.8; font-weight: 500;">
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">1. Acceptance of Terms</h3>
                    <p>By using Aunix Studio services, you agree to be bound by these Terms and Conditions.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">2. Service Description</h3>
                    <p>Aunix Studio provides website and mobile application development services with professional quality and support.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">3. Payment Terms</h3>
                    <p>All payments must be made in advance. Refunds are subject to our refund policy and project completion status.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">4. Delivery</h3>
                    <p>Project delivery times vary based on complexity and requirements. Standard delivery is 7-14 business days.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">5. Intellectual Property</h3>
                    <p>Upon full payment, clients receive full ownership of their custom projects, excluding any third-party components.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">6. Limitation of Liability</h3>
                    <p>Aunix Studio's liability is limited to the amount paid for services. We provide best-effort support and maintenance.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">7. Premium Pro Terms</h3>
                    <p>Premium Pro memberships are non-transferable and provide benefits for the specified duration. Premium codes are single-use and expire after activation period.</p>
                </div>
            </article>
        </section>

        <!-- Privacy Policy Page -->
        <section class="page" id="privacy">
            <article class="card">
                <h1 class="card-title">Privacy Policy</h1>
                <div style="color: var(--text-secondary); line-height: 1.8; font-weight: 500;">
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">Information We Collect</h3>
                    <p>We collect information you provide directly to us, such as when you create an account, place an order, or contact us for support.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">How We Use Your Information</h3>
                    <p>We use the information we collect to provide, maintain, and improve our services, process payments, and communicate with you.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">Information Sharing</h3>
                    <p>We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except as described in this policy.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">Data Security</h3>
                    <p>We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">Premium Pro Data</h3>
                    <p>Premium Pro status and activation codes are stored securely in Firestore. We use industry-standard security practices to protect your premium membership data.</p>
                    
                    <h3 style="color: var(--accent-primary); margin: 32px 0 16px 0; font-weight: 700; font-family: var(--font-display);">Contact Us</h3>
                    <p>If you have any questions about this Privacy Policy, please contact us through our support channels.</p>
                </div>
            </article>
        </section>

        <!-- Account Page -->
        <section class="page" id="account">
            <!-- Authentication Section -->
            <article class="card" id="authSection">
                <h1 class="card-title">My Account</h1>
                
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
                    <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
                </div>

                <!-- Login Form -->
                <div class="auth-form active" id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="loginEmail">Email Address</label>
                        <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="loginPassword">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password">
                    </div>
                    <button class="btn btn-primary" onclick="handleEmailLogin()" style="width: 100%; margin-bottom: 20px;">Login</button>
                    <button class="google-btn" onclick="handleGoogleLogin()">
                        <span></span> Continue with Google
                    </button>
                    <p style="text-align: center; margin-top: 20px; color: var(--text-secondary);">
                        <a href="#" onclick="handleForgotPassword()" style="color: var(--accent-primary);">Forgot your password?</a>
                    </p>
                </div>

                <!-- Sign Up Form -->
                <div class="auth-form" id="signupForm">
                    <div class="form-group">
                        <label class="form-label" for="signupEmail">Email Address</label>
                        <input type="email" class="form-input" id="signupEmail" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="signupPassword">Password</label>
                        <input type="password" class="form-input" id="signupPassword" placeholder="Enter your password">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="confirmPassword">Confirm Password</label>
                        <input type="password" class="form-input" id="confirmPassword" placeholder="Confirm your password">
                    </div>
                    <button class="btn btn-primary" onclick="handleEmailSignup()" style="width: 100%; margin-bottom: 20px;">Sign Up</button>
                    <button class="google-btn" onclick="handleGoogleLogin()">
                        <span></span> Continue with Google
                    </button>
                </div>
            </article>

            <!-- User Profile Section (Hidden by default, shown when logged in) -->
            <article class="card" id="userProfileSection" style="display: none;">
                <div class="user-profile">
                    <img id="userAvatar" src="https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&dpr=1" alt="User Avatar">
                    <h3 id="userName">User Name</h3>
                    <p id="userEmailDisplay">user@example.com</p>
                    <button class="logout-btn" onclick="handleLogout()">Logout</button>
                </div>

                <!-- User UID Display -->
                <div class="uid-display-card">
                    <h3 style="color: var(--accent-primary); margin-bottom: 16px; font-weight: 700; font-family: var(--font-display);"> Your User ID (UID)</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 16px; font-weight: 500;">
                        Copy this UID when purchasing Premium Pro membership:
                    </p>
                    <div class="uid-display">
                        <span class="uid-text" id="userUIDDisplay">Not logged in</span>
                        <button type="button" class="copy-btn" onclick="copyUserUID()">Copy</button>
                    </div>
                </div>

                <!-- Enhanced Theme Selection -->
                <div class="card">
                    <h3 style="color: var(--accent-primary); margin-bottom: 24px; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> Choose Your Theme</h3>
                    <div class="theme-grid">
                        <div class="theme-option" onclick="changeTheme('default')" data-theme="default">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #3b82f6, #8b5cf6);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Executive Elite</div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('platinum-business')" data-theme="platinum-business">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #e4e4e7, #a1a1aa);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Platinum Business</div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('royal-emerald')" data-theme="royal-emerald">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #10b981, #34d399);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Royal Emerald</div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('crimson-executive')" data-theme="crimson-executive">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #dc2626, #ef4444);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Crimson Executive</div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('sunset-luxury')" data-theme="sunset-luxury">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #fb923c, #f97316);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Sunset Luxury</div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('gold-standard')" data-theme="gold-standard">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Gold Standard</div>
                        </div>
                        <div class="theme-option" onclick="changeTheme('purple-royalty')" data-theme="purple-royalty">
                            <div class="theme-preview" style="background: linear-gradient(135deg, #a855f7, #c084fc);"></div>
                            <div style="font-weight: 700; font-family: var(--font-display);"> Purple Royalty</div>
                        </div>
                    </div>
                </div>

                <!-- Order History -->
                <div class="card">
                    <h3 style="color: var(--accent-primary); margin-bottom: 32px; font-size: 24px; font-weight: 700; font-family: var(--font-display);"> My Orders</h3>
                    <div id="userOrders"></div>
                </div>
            </article>
        </section>
    </main>

    <script>
        // ========================================
        // GLOBAL VARIABLES & INITIALIZATION
        // ========================================
        let currentUser = null;
        let authInitialized = false;
        let premiumStatus = null;
        let selectedPremiumDuration = null;
        let selectedPremiumPrice = 0;
        
        let currentOrder = {
            type: '',
            category: '',
            format: '',
            pages: [],
            features: [],
            benefits: [],
            products: [],
            customerPaymentMethods: [],
            authMethods: [],
            firebaseInfo: {},
            totalPrice: 0
        };

        let products = [];
        let customerPaymentMethods = [];
        let selectedAuthMethods = [];

        // Missed Products System
        let missedProducts = [];
        let currentVariants = [];

        // Payment addresses for final order payment (business addresses)
        const ourPaymentAddresses = {
            bkash: '+8801400378141',
            nagad: '+8801400378141',
            rocket: '+8801400378141',
            btc: '13SVquzXXjfWKZ1bCFdmaMeJbMPb5AFkXo',
            ltc: 'LSWTRiHis5Kn6H6UBzJHpBicjZ8X7T5Kfr'
        };

        // Delivery time information
        const deliveryTimes = {
            'bkash': 'Instant delivery within 5-10 minutes',
            'nagad': 'Instant delivery within 5-10 minutes', 
            'rocket': 'Instant delivery within 5-10 minutes',
            'btc': 'Delivery after 1-3 confirmations (15-45 minutes)',
            'ltc': 'Delivery after 3-6 confirmations (15-30 minutes)'
        };

        // ========================================
        // FIREBASE FIRESTORE PREMIUM SYSTEM
        // ========================================

        /**
         * Validates a premium code using Firestore
         * This function replaces the hardcoded validation system
         */
        async function validatePremiumCodeFirestore(code, userUID) {
            try {
                if (!window.firestoreDB) {
                    throw new Error('Firestore not initialized');
                }

                if (!userUID) {
                    throw new Error('User must be logged in to use premium codes');
                }

                const { db, collection, query, where, getDocs, doc, getDoc, updateDoc, serverTimestamp } = window.firestoreDB;

                // Query for the premium code
                const codesRef = collection(db, 'premiumCodes');
                const q = query(codesRef, where('code', '==', code));
                const querySnapshot = await getDocs(q);

                if (querySnapshot.empty) {
                    throw new Error('Invalid premium code');
                }

                const codeDoc = querySnapshot.docs[0];
                const codeData = codeDoc.data();

                // Check if code is already used
                if (codeData.used === true) {
                    throw new Error('This premium code has already been used');
                }

                // Check if code has a specific UID and if it matches current user
                if (codeData.uid && codeData.uid !== userUID) {
                    throw new Error('This premium code is assigned to a different user');
                }

                // Calculate expiry date
                const now = new Date();
                let expiryDate = new Date(now);

                switch (codeData.duration) {
                    case '7-days':
                        expiryDate.setDate(now.getDate() + 7);
                        break;
                    case '30-days':
                        expiryDate.setDate(now.getDate() + 30);
                        break;
                    case '3-months':
                        expiryDate.setMonth(now.getMonth() + 3);
                        break;
                    case '1-year':
                        expiryDate.setFullYear(now.getFullYear() + 1);
                        break;
                    case '3-years':
                        expiryDate.setFullYear(now.getFullYear() + 3);
                        break;
                    default:
                        expiryDate.setDate(now.getDate() + 30); // Default to 30 days
                }

                // Update the code as used in Firestore
                await updateDoc(doc(db, 'premiumCodes', codeDoc.id), {
                    used: true,
                    unlockedAt: serverTimestamp(),
                    expiresAt: expiryDate,
                    usedBy: userUID
                });

                // Update user document in Firestore
                await updateUserPremiumStatus(userUID, {
                    premium: true,
                    premiumDuration: codeData.duration,
                    expiresAt: expiryDate,
                    activatedAt: now,
                    code: code
                });

                return {
                    success: true,
                    duration: codeData.duration,
                    expiresAt: expiryDate,
                    activatedAt: now
                };

            } catch (error) {
                console.error('Premium code validation error:', error);
                throw error;
            }
        }

        /**
         * Updates user premium status in Firestore
         */
        async function updateUserPremiumStatus(userUID, premiumData) {
            try {
                if (!window.firestoreDB) return;

                const { db, doc, setDoc } = window.firestoreDB;
                const userRef = doc(db, 'users', userUID);

                await setDoc(userRef, {
                    uid: userUID,
                    ...premiumData,
                    updatedAt: new Date()
                }, { merge: true });

                console.log(' User premium status updated in Firestore');
            } catch (error) {
                console.error(' Error updating user premium status:', error);
            }
        }

        /**
         * Syncs premium status with Firestore on user login
         */
        async function syncPremiumStatusWithFirestore(user) {
            try {
                if (!window.firestoreDB || !user?.uid) return;

                const { db, doc, getDoc } = window.firestoreDB;
                const userRef = doc(db, 'users', user.uid);
                const userDoc = await getDoc(userRef);

                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    
                    if (userData.premium === true && userData.expiresAt) {
                        const expiryDate = userData.expiresAt.toDate ? userData.expiresAt.toDate() : new Date(userData.expiresAt);
                        const now = new Date();

                        if (expiryDate > now) {
                            // Premium is still active, restore from Firestore
                            premiumStatus = {
                                active: true,
                                duration: userData.premiumDuration || '30-days',
                                activatedAt: userData.activatedAt ? (userData.activatedAt.toDate ? userData.activatedAt.toDate().toISOString() : userData.activatedAt) : now.toISOString(),
                                expiry: expiryDate.toISOString(),
                                code: userData.code || 'FIRESTORE_SYNC',
                                syncedFromFirestore: true
                            };

                            // Save to localStorage for offline access
                            localStorage.setItem('premiumProStatus', JSON.stringify(premiumStatus));
                            
                            // Update UI
                            updatePremiumUI();
                            applyPremiumFeatures();

                            showToast(' Premium Pro status restored from cloud!', 'success');
                            console.log(' Premium status synced from Firestore');
                        } else {
                            // Premium has expired, deactivate
                            await deactivatePremiumFirestore(user.uid);
                        }
                    } else {
                        // Check if user has local premium but not in Firestore
                        const localPremium = localStorage.getItem('premiumProStatus');
                        if (localPremium) {
                            const localStatus = JSON.parse(localPremium);
                            if (localStatus.active && new Date(localStatus.expiry) > new Date()) {
                                // Update Firestore with local premium status
                                await updateUserPremiumStatus(user.uid, {
                                    premium: true,
                                    premiumDuration: localStatus.duration,
                                    expiresAt: new Date(localStatus.expiry),
                                    activatedAt: new Date(localStatus.activatedAt),
                                    code: localStatus.code
                                });
                                console.log(' Local premium status synced to Firestore');
                            }
                        }
                    }
                } else {
                    // User document doesn't exist, check if they have local premium
                    const localPremium = localStorage.getItem('premiumProStatus');
                    if (localPremium) {
                        const localStatus = JSON.parse(localPremium);
                        if (localStatus.active && new Date(localStatus.expiry) > new Date()) {
                            // Create user document with premium status
                            await updateUserPremiumStatus(user.uid, {
                                premium: true,
                                premiumDuration: localStatus.duration,
                                expiresAt: new Date(localStatus.expiry),
                                activatedAt: new Date(localStatus.activatedAt),
                                code: localStatus.code
                            });
                            console.log(' User document created with premium status');
                        }
                    }
                }

                // Load premium status from localStorage if not already loaded
                if (!premiumStatus) {
                    loadPremiumStatus();
                }

            } catch (error) {
                console.error(' Error syncing premium status:', error);
                // Fallback to localStorage
                loadPremiumStatus();
            }
        }

        /**
         * Deactivates premium in both Firestore and localStorage
         */
        async function deactivatePremiumFirestore(userUID) {
            try {
                if (userUID && window.firestoreDB) {
                    const { db, doc, updateDoc } = window.firestoreDB;
                    const userRef = doc(db, 'users', userUID);

                    await updateDoc(userRef, {
                        premium: false,
                        deactivatedAt: new Date()
                    });
                }

                // Clear localStorage
                premiumStatus = null;
                localStorage.removeItem('premiumProStatus');
                
                // Reset UI
                updatePremiumUI();
                resetPricesToOriginal();
                
                // Show branding elements
                const brandingElements = document.querySelectorAll('.branding-text');
                brandingElements.forEach(element => {
                    element.style.display = 'block';
                });

                // Remove pro mode class
                document.body.classList.remove('pro-mode');
                
                showToast('Premium Pro has expired and been deactivated', 'warning');
                console.log(' Premium deactivated in Firestore and locally');

            } catch (error) {
                console.error(' Error deactivating premium:', error);
                // Still deactivate locally even if Firestore fails
                deactivatePremium();
            }
        }

        /**
         * Auto-checks for premium expiry every minute
         */
        function setupPremiumExpiryCheck() {
            setInterval(async () => {
                if (premiumStatus && premiumStatus.active && premiumStatus.expiry) {
                    const now = new Date();
                    const expiryDate = new Date(premiumStatus.expiry);
                    
                    if (now > expiryDate) {
                        console.log(' Premium has expired, deactivating...');
                        if (currentUser?.uid) {
                            await deactivatePremiumFirestore(currentUser.uid);
                        } else {
                            deactivatePremium();
                        }
                    }
                }
            }, 60000); // Check every minute
        }

        /**
         * Main function to unlock premium using Firestore
         */
        async function unlockPremiumWithFirestore() {
            const codeInput = document.getElementById('premiumCode');
            const code = codeInput.value.trim().toUpperCase();

            if (!code) {
                showToast('Please enter a Premium Pro code', 'error');
                return;
            }

            if (!currentUser?.uid) {
                showToast('Please log in first to unlock Premium Pro', 'error');
                return;
            }

            // Show loading state
            const unlockBtn = document.querySelector('#premiumCodeSection .btn-primary');
            const originalText = unlockBtn.textContent;
            unlockBtn.innerHTML = '<span class="loading"></span> Validating Code...';
            unlockBtn.disabled = true;

            try {
                const result = await validatePremiumCodeFirestore(code, currentUser.uid);

                if (result.success) {
                    // Set premium status
                    premiumStatus = {
                        active: true,
                        duration: result.duration,
                        activatedAt: result.activatedAt.toISOString(),
                        expiry: result.expiresAt.toISOString(),
                        code: code
                    };

                    // Save to localStorage
                    localStorage.setItem('premiumProStatus', JSON.stringify(premiumStatus));
                    
                    // Update UI
                    updatePremiumUI();
                    applyPremiumFeatures();

                    // Clear input
                    codeInput.value = '';

                    showToast(' Premium Pro activated successfully!', 'success');
                    console.log(' Premium Pro activated via Firestore');
                }

            } catch (error) {
                console.error('Premium unlock error:', error);
                showToast(error.message || 'Failed to unlock Premium Pro. Please try again.', 'error');
            } finally {
                // Restore button
                unlockBtn.textContent = originalText;
                unlockBtn.disabled = false;
            }
        }

        // ========================================
        // APPLICATION INITIALIZATION
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            // Check if Firebase auth is ready
            const checkAuth = setInterval(() => {
                if (window.firebaseAuth && window.firebaseAuth.auth && window.firestoreDB) {
                    authInitialized = true;
                    clearInterval(checkAuth);
                    initializeApp();
                }
            }, 100);
        });

        function initializeApp() {
            loadTheme();
            loadOrders();
            loadPremiumStatus();
            updateSelections(); // Initialize with default pages selected
            updateMissedProductLimits(); // Initialize missed product limits
            
            // Setup form submission handlers
            setupFormHandlers();
            
            // Setup event listeners
            setupEventListeners();

            // Setup premium expiry check
            setupPremiumExpiryCheck();
        }

        // ========================================
        // MISSED PRODUCTS SYSTEM
        // ========================================
        function updateMissedProductLimits() {
            const isPremium = premiumStatus && premiumStatus.active;
            const maxProducts = isPremium ? 75 : 45;
            const maxVariants = isPremium ? 15 : 5;
            
            // Update UI elements
            const maxProductsSpan = document.getElementById('maxProducts');
            const maxVariantsSpan = document.getElementById('maxVariants');
            const limitsText = document.getElementById('limitsText');
            
            if (maxProductsSpan) maxProductsSpan.textContent = maxProducts;
            if (maxVariantsSpan) maxVariantsSpan.textContent = maxVariants;
            
            if (limitsText) {
                limitsText.textContent = isPremium 
                    ? 'Premium Pro users can add up to 75 products with 15 variants each.'
                    : 'Normal users can add up to 45 products with 5 variants each. Upgrade to Premium Pro for more!';
            }
            
            updateMissedProductCounter();
        }

        function updateMissedProductCounter() {
            const isPremium = premiumStatus && premiumStatus.active;
            const maxProducts = isPremium ? 75 : 45;
            const currentCount = missedProducts.length;
            
            const productCountSpan = document.getElementById('productCount');
            const productCounter = document.getElementById('productCounter');
            const addMissedProductBtn = document.getElementById('addMissedProductBtn');
            const submitBtn = document.getElementById('submitMissedProductsBtn');
            const submitProductCount = document.getElementById('submitProductCount');
            
            if (productCountSpan) productCountSpan.textContent = currentCount;
            if (submitProductCount) submitProductCount.textContent = currentCount;
            
            // Update counter styling based on limits
            if (productCounter) {
                productCounter.classList.remove('warning', 'danger');
                
                if (currentCount >= maxProducts) {
                    productCounter.classList.add('danger');
                } else if (currentCount >= maxProducts * 0.8) {
                    productCounter.classList.add('warning');
                }
            }
            
            // Disable/enable add button based on limits
            if (addMissedProductBtn) {
                addMissedProductBtn.disabled = currentCount >= maxProducts;
                if (currentCount >= maxProducts) {
                    addMissedProductBtn.textContent = 'Product Limit Reached';
                } else {
                    addMissedProductBtn.textContent = '+ Add Product';
                }
            }
            
            // Enable/disable submit button
            if (submitBtn) {
                const hasOrderInfo = document.getElementById('missedProductEmail').value.trim() &&
                                   document.getElementById('missedProductOrderId').value.trim() &&
                                   document.getElementById('missedProductStoreName').value.trim();
                
                submitBtn.disabled = currentCount === 0 || !hasOrderInfo;
                
                if (currentCount === 0) {
                    submitBtn.textContent = 'Add Products First';
                } else if (!hasOrderInfo) {
                    submitBtn.textContent = 'Complete Order Information';
                } else {
                    submitBtn.textContent = `Submit ${currentCount} Product${currentCount > 1 ? 's' : ''}`;
                }
            }
        }

        function addVariant() {
            const isPremium = premiumStatus && premiumStatus.active;
            const maxVariants = isPremium ? 15 : 5;
            
            if (currentVariants.length >= maxVariants) {
                showToast(`Maximum ${maxVariants} variants allowed per product`, 'warning');
                return;
            }
            
            const variantsContainer = document.getElementById('variantsContainer');
            const variantIndex = currentVariants.length;
            
            const variantHtml = `
                <div class="variant-item" data-index="${variantIndex}">
                    <div class="form-group" style="flex: 1; margin-bottom: 0;">
                        <input type="text" class="form-input" placeholder="Variant name (e.g., Size, Color)" 
                               onchange="updateVariant(${variantIndex}, 'name', this.value)">
                    </div>
                    <div class="form-group" style="flex: 1; margin-bottom: 0;">
                        <input type="text" class="form-input" placeholder="Variant value (e.g., Large, Red)" 
                               onchange="updateVariant(${variantIndex}, 'value', this.value)">
                    </div>
                    <div class="form-group" style="flex: 1; margin-bottom: 0;">
                        <input type="number" class="form-input" placeholder="Price difference (optional)" 
                               onchange="updateVariant(${variantIndex}, 'price', this.value)" min="0">
                    </div>
                    <button type="button" class="variant-remove-btn" onclick="removeVariant(${variantIndex})">Remove</button>
                </div>
            `;
            
            // Insert before the add variant button
            const addVariantBtn = document.getElementById('addVariantBtn');
            addVariantBtn.insertAdjacentHTML('beforebegin', variantHtml);
            
            // Add to variants array
            currentVariants.push({ name: '', value: '', price: 0 });
            
            // Update add button state
            updateAddVariantButton();
        }

        function removeVariant(index) {
            // Remove from DOM
            const variantItem = document.querySelector(`[data-index="${index}"]`);
            if (variantItem) variantItem.remove();
            
            // Remove from array
            currentVariants.splice(index, 1);
            
            // Update remaining variant indices
            const remainingVariants = document.querySelectorAll('.variant-item');
            remainingVariants.forEach((item, newIndex) => {
                item.setAttribute('data-index', newIndex);
                
                // Update onclick handlers
                const removeBtn = item.querySelector('.variant-remove-btn');
                if (removeBtn) removeBtn.setAttribute('onclick', `removeVariant(${newIndex})`);
                
                // Update onchange handlers
                const inputs = item.querySelectorAll('input');
                inputs.forEach((input, inputIndex) => {
                    const properties = ['name', 'value', 'price'];
                    if (properties[inputIndex]) {
                        input.setAttribute('onchange', `updateVariant(${newIndex}, '${properties[inputIndex]}', this.value)`);
                    }
                });
            });
            
            updateAddVariantButton();
        }

        function updateVariant(index, property, value) {
            if (currentVariants[index]) {
                currentVariants[index][property] = value;
            }
        }

        function updateAddVariantButton() {
            const isPremium = premiumStatus && premiumStatus.active;
            const maxVariants = isPremium ? 15 : 5;
            const addVariantBtn = document.getElementById('addVariantBtn');
            
            if (addVariantBtn) {
                if (currentVariants.length >= maxVariants) {
                    addVariantBtn.disabled = true;
                    addVariantBtn.textContent = `Maximum ${maxVariants} Variants Reached`;
                } else {
                    addVariantBtn.disabled = false;
                    addVariantBtn.textContent = `+ Add Variant (${currentVariants.length}/${maxVariants})`;
                }
            }
        }

        function addMissedProduct() {
            const isPremium = premiumStatus && premiumStatus.active;
            const maxProducts = isPremium ? 75 : 45;
            
            if (missedProducts.length >= maxProducts) {
                showToast(`Maximum ${maxProducts} products allowed`, 'error');
                return;
            }
            
            const name = document.getElementById('missedProductName').value.trim();
            const price = document.getElementById('missedProductPrice').value.trim();
            const image = document.getElementById('missedProductImage').value.trim();
            const description = document.getElementById('missedProductDescription').value.trim();
            
            if (!name) {
                showToast('Please enter product name', 'error');
                return;
            }
            
            if (!price || isNaN(price) || parseFloat(price) < 0) {
                showToast('Please enter a valid price', 'error');
                return;
            }
            
            // Validate variants
            const validVariants = currentVariants.filter(variant => 
                variant.name.trim() && variant.value.trim()
            );
            
            const product = {
                name,
                price: parseFloat(price),
                image: image || '',
                description: description || '',
                variants: validVariants,
                id: Date.now() + Math.random() // Simple unique ID
            };
            
            missedProducts.push(product);
            updateMissedProductsList();
            updateMissedProductCounter();
            
            // Clear form
            clearMissedProductForm();
            
            showToast('Product added successfully!', 'success');
        }

        function clearMissedProductForm() {
            document.getElementById('missedProductName').value = '';
            document.getElementById('missedProductPrice').value = '';
            document.getElementById('missedProductImage').value = '';
            document.getElementById('missedProductDescription').value = '';
            
            // Clear variants
            const variantItems = document.querySelectorAll('.variant-item');
            variantItems.forEach(item => item.remove());
            currentVariants = [];
            updateAddVariantButton();
        }

        function updateMissedProductsList() {
            const listContainer = document.getElementById('missedProductsList');
            const contentDiv = document.getElementById('missedProductsContent');
            
            if (missedProducts.length === 0) {
                if (listContainer) listContainer.style.display = 'none';
                return;
            }
            
            if (listContainer) listContainer.style.display = 'block';
            
            let html = '';
            
            missedProducts.forEach((product, index) => {
                html += `
                    <div class="product-item">
                        ${product.image ? `<img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.style.display='none'">` : ''}
                        <div class="product-details">
                            <div class="product-name">${product.name}</div>
                            <div class="product-price">${product.price} TK</div>
                            ${product.description ? `<div style="font-size: 14px; color: var(--text-muted); margin-top: 6px; font-weight: 500;">${product.description}</div>` : ''}
                            ${product.variants.length > 0 ? `
                                <div style="margin-top: 8px;">
                                    <strong style="font-size: 12px; color: var(--text-secondary);">Variants:</strong>
                                    ${product.variants.map(variant => 
                                        `<span style="display: inline-block; background: var(--input-bg); padding: 4px 8px; border-radius: 8px; font-size: 11px; margin: 2px; color: var(--text-secondary);">
                                            ${variant.name}: ${variant.value}${variant.price > 0 ? ` (+${variant.price} TK)` : ''}
                                        </span>`
                                    ).join('')}
                                </div>
                            ` : ''}
                        </div>
                        <button class="delete-btn" onclick="removeMissedProduct(${index})">Delete</button>
                    </div>
                `;
            });
            
            if (contentDiv) contentDiv.innerHTML = html;
        }

        function removeMissedProduct(index) {
            if (index >= 0 && index < missedProducts.length) {
                missedProducts.splice(index, 1);
                updateMissedProductsList();
                updateMissedProductCounter();
                showToast('Product removed successfully!', 'success');
            }
        }

        function setupMissedProductFormHandlers() {
            const form = document.getElementById('missedProductForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    const submitBtn = e.target.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    
                    // Show loading state
                    submitBtn.innerHTML = '<span class="loading"></span> Submitting Products...';
                    submitBtn.disabled = true;
                    
                    // Prepare form data
                    const email = document.getElementById('missedProductEmail').value;
                    const orderId = document.getElementById('missedProductOrderId').value;
                    const storeName = document.getElementById('missedProductStoreName').value;
                    
                    // Set hidden fields
                    document.getElementById('missedProductsData').value = JSON.stringify(missedProducts);
                    document.getElementById('totalMissedProducts').value = missedProducts.length;
                    
                    // Auto-fill user data if logged in
                    if (currentUser) {
                        document.getElementById('missedProductUserEmail').value = currentUser.email;
                        document.getElementById('missedProductUserUID').value = currentUser.uid;
                    }
                    
                    document.getElementById('missedProductIsPremium').value = 
                        premiumStatus && premiumStatus.active ? 'Yes' : 'No';
                    
                    showToast('Missed products submitted successfully! Redirecting to Formspree...', 'success');
                });
            }
            
            // Add event listeners for order info fields
            const orderInfoFields = ['missedProductEmail', 'missedProductOrderId', 'missedProductStoreName'];
            orderInfoFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('input', updateMissedProductCounter);
                }
            });
        }

        // ========================================
        // PREMIUM PRO SYSTEM (UPDATED)
        // ========================================
        function loadPremiumStatus() {
            try {
                const savedStatus = localStorage.getItem('premiumProStatus');
                if (savedStatus) {
                    premiumStatus = JSON.parse(savedStatus);
                    
                    // Check if premium has expired
                    if (premiumStatus.expiry && new Date() > new Date(premiumStatus.expiry)) {
                        // Premium has expired
                        if (currentUser?.uid) {
                            deactivatePremiumFirestore(currentUser.uid);
                        } else {
                            deactivatePremium();
                        }
                        return;
                    }
                    
                    // Premium is still active
                    updatePremiumUI();
                    applyPremiumFeatures();
                }
            } catch (error) {
                console.error('Load premium status error:', error);
            }
        }

        function updatePremiumUI() {
            const statusIndicator = document.getElementById('premiumStatusIndicator');
            const modeToggle = document.getElementById('premiumModeToggle');
            const statusDisplay = document.getElementById('premiumStatusDisplay');
            const codeSection = document.getElementById('premiumCodeSection');
            const expiryDisplay = document.getElementById('premiumExpiryDisplay');

            if (premiumStatus && premiumStatus.active) {
                // Show premium status
                if (statusIndicator) {
                    statusIndicator.classList.add('active');
                    statusIndicator.innerHTML = ` PREMIUM PRO ACTIVE - ${premiumStatus.duration.replace('-', ' ').toUpperCase()}`;
                }
                
                if (modeToggle) modeToggle.classList.add('active');
                
                // Update unlock premium page
                if (statusDisplay) statusDisplay.style.display = 'block';
                if (codeSection) codeSection.style.display = 'none';
                
                if (expiryDisplay && premiumStatus.expiry) {
                    const expiryDate = new Date(premiumStatus.expiry);
                    expiryDisplay.textContent = `Expires on: ${expiryDate.toLocaleDateString()} at ${expiryDate.toLocaleTimeString()}`;
                }
                
                // Update missed product limits
                updateMissedProductLimits();
            } else {
                // Hide premium status
                if (statusIndicator) statusIndicator.classList.remove('active');
                if (modeToggle) modeToggle.classList.remove('active');
                
                // Update unlock premium page
                if (statusDisplay) statusDisplay.style.display = 'none';
                if (codeSection) codeSection.style.display = 'block';
                
                // Update missed product limits
                updateMissedProductLimits();
            }
        }

        function applyPremiumFeatures() {
            if (!premiumStatus || !premiumStatus.active) return;

            // Apply 35% discount to all prices
            updatePricesWithDiscount();
            
            // Hide branding elements
            const brandingElements = document.querySelectorAll('.branding-text');
            brandingElements.forEach(element => {
                element.style.display = 'none';
            });
            
            // Update missed product limits
            updateMissedProductLimits();
        }

        function updatePricesWithDiscount() {
            const discount = 0.35; // 35% discount
            
            // Update service prices
            const websitePrice = document.getElementById('websitePrice');
            const appPrice = document.getElementById('appPrice');
            const homeProductPrice = document.getElementById('homeProductPrice');
            const productPagePrice = document.getElementById('productPagePrice');

            if (websitePrice) {
                const originalPrice = 999;
                const discountedPrice = Math.round(originalPrice * (1 - discount));
                websitePrice.innerHTML = `<span style="text-decoration: line-through; color: var(--text-muted); font-size: 24px;">${originalPrice} TK</span><br>${discountedPrice} TK`;
            }

            if (appPrice) {
                const originalPrice = 1120;
                const discountedPrice = Math.round(originalPrice * (1 - discount));
                appPrice.innerHTML = `<span style="text-decoration: line-through; color: var(--text-muted); font-size: 24px;">${originalPrice} TK</span><br>${discountedPrice} TK`;
            }

            if (homeProductPrice) {
                const originalPrice = 120;
                const discountedPrice = Math.round(originalPrice * (1 - discount));
                homeProductPrice.innerHTML = `<span style="text-decoration: line-through; color: var(--text-muted); font-size: 32px;">${originalPrice} TK</span><br>${discountedPrice} TK`;
            }

            if (productPagePrice) {
                const originalPrice = 120;
                const discountedPrice = Math.round(originalPrice * (1 - discount));
                productPagePrice.innerHTML = `<span style="text-decoration: line-through; color: var(--text-muted); font-size: 32px;">${originalPrice} TK</span><br>${discountedPrice} TK`;
            }

            // Update custom page prices
            const socialsPagePrice = document.getElementById('socialsPagePrice');
            const customerPagePrice = document.getElementById('customerPagePrice');
            const brandingPrice = document.getElementById('brandingPrice');
            const googleAuthPrice = document.getElementById('googleAuthPrice');

            if (socialsPagePrice) {
                const originalPrice = 90;
                const discountedPrice = Math.round(originalPrice * (1 - discount));
                socialsPagePrice.textContent = `+${discountedPrice} TK`;
                // Update data-price attribute
                const checkbox = document.querySelector('input[value="socials"]');
                if (checkbox) checkbox.setAttribute('data-price', discountedPrice);
            }

            if (customerPagePrice) {
                const originalPrice = 67;
                const discountedPrice = Math.round(originalPrice * (1 - discount));
                customerPagePrice.textContent = `+${discountedPrice} TK`;
                // Update data-price attribute
                const checkbox = document.querySelector('input[value="customer"]');
                if (checkbox) checkbox.setAttribute('data-price', discountedPrice);
            }

            if (brandingPrice) {
                brandingPrice.innerHTML = '<span style="text-decoration: line-through;">+100 TK</span><br>FREE';
                // Update data-price attribute
                const checkbox = document.querySelector('input[value="remove-branding"]');
                if (checkbox) checkbox.setAttribute('data-price', '0');
            }

            if (googleAuthPrice) {
                const originalPrice = 23;
                const discountedPrice = Math.round(originalPrice * 0.65);
                googleAuthPrice.textContent = `+${discountedPrice} TK`;
            }
        }

        function selectPremiumDuration(duration, price) {
            selectedPremiumDuration = duration;
            selectedPremiumPrice = price;

            // Update UI
            document.querySelectorAll('.pricing-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            if (event && event.target) {
                const card = event.target.closest('.pricing-card');
                if (card) card.classList.add('selected');
            }

            // Update hidden form fields
            document.getElementById('premiumDuration').value = duration;
            document.getElementById('premiumPrice').value = price;

            // Enable submit button
            const submitBtn = document.getElementById('premiumProSubmitBtn');
            const paymentMethod = document.getElementById('premiumProPaymentMethod').value;
            
            if (submitBtn && paymentMethod) {
                submitBtn.disabled = false;
                submitBtn.textContent = `Purchase Premium Pro - ${price}`;
            } else if (submitBtn) {
                submitBtn.disabled = false;
                submitBtn.textContent = `Select Payment Method - ${price}`;
            }
        }

        function showPremiumProPaymentInfo() {
            const method = document.getElementById('premiumProPaymentMethod').value;
            const infoDiv = document.getElementById('premiumProPaymentInfo');
            const transactionGroup = document.getElementById('premiumProTransactionGroup');
            const transactionLabel = document.getElementById('premiumProTransactionLabel');
            const deliveryNotice = document.getElementById('deliveryNotice');
            const deliveryText = document.getElementById('deliveryText');
            const submitBtn = document.getElementById('premiumProSubmitBtn');

            if (!method) {
                if (infoDiv) infoDiv.style.display = 'none';
                if (transactionGroup) transactionGroup.style.display = 'none';
                if (deliveryNotice) deliveryNotice.style.display = 'none';
                return;
            }

            const address = ourPaymentAddresses[method];
            let html = '';
            
            if (['bkash', 'nagad', 'rocket'].includes(method)) {
                html = `
                    <div class="payment-info-card">
                        <p style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">Send ${selectedPremiumPrice} to ${method.toUpperCase()}:</p>
                        <div class="payment-address">
                            <span class="payment-address-text">${address}</span>
                            <button type="button" class="copy-btn" onclick="copyPaymentAddress('${address}')">Copy</button>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 16px; font-weight: 500;">After sending money, enter the transaction ID below</p>
                    </div>
                `;
                if (transactionLabel) transactionLabel.textContent = 'Transaction ID *';
            } else {
                const displayName = method.charAt(0).toUpperCase() + method.slice(1);
                html = `
                    <div class="payment-info-card">
                        <p style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">Send ${displayName} equivalent of ${selectedPremiumPrice} to this address:</p>
                        <div class="payment-address">
                            <span class="payment-address-text">${address}</span>
                            <button type="button" class="copy-btn" onclick="copyPaymentAddress('${address}')">Copy</button>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 16px; font-weight: 500;">After sending crypto, enter the transaction hash below</p>
                    </div>
                `;
                if (transactionLabel) transactionLabel.textContent = 'Transaction Hash (TXID) *';
            }
            
            if (infoDiv) {
                infoDiv.innerHTML = html;
                infoDiv.style.display = 'block';
            }
            if (transactionGroup) transactionGroup.style.display = 'block';

            // Show delivery notice
            if (deliveryNotice && deliveryText) {
                deliveryText.textContent = deliveryTimes[method] || 'Standard delivery time applies';
                deliveryNotice.style.display = 'block';
            }

            // Update submit button
            if (submitBtn && selectedPremiumPrice > 0) {
                submitBtn.disabled = false;
                submitBtn.textContent = `Purchase Premium Pro - ${selectedPremiumPrice}`;
            }
        }

        function deactivatePremium() {
            premiumStatus = null;
            localStorage.removeItem('premiumProStatus');
            
            // Reset UI
            updatePremiumUI();
            
            // Reset prices
            resetPricesToOriginal();
            
            // Show branding elements
            const brandingElements = document.querySelectorAll('.branding-text');
            brandingElements.forEach(element => {
                element.style.display = 'block';
            });

            // Remove pro mode class
            document.body.classList.remove('pro-mode');
            
            showToast('Premium Pro has been deactivated', 'warning');
        }

        function resetPricesToOriginal() {
            // Reset service prices
            const websitePrice = document.getElementById('websitePrice');
            const appPrice = document.getElementById('appPrice');
            const homeProductPrice = document.getElementById('homeProductPrice');
            const productPagePrice = document.getElementById('productPagePrice');

            if (websitePrice) websitePrice.textContent = '999 TK';
            if (appPrice) appPrice.textContent = '1120 TK';
            if (homeProductPrice) homeProductPrice.textContent = '120 TK';
            if (productPagePrice) productPagePrice.textContent = '120 TK';

            // Reset custom page prices
            const socialsPagePrice = document.getElementById('socialsPagePrice');
            const customerPagePrice = document.getElementById('customerPagePrice');
            const brandingPrice = document.getElementById('brandingPrice');
            const googleAuthPrice = document.getElementById('googleAuthPrice');

            if (socialsPagePrice) {
                socialsPagePrice.textContent = '+90 TK';
                const checkbox = document.querySelector('input[value="socials"]');
                if (checkbox) checkbox.setAttribute('data-price', '90');
            }

            if (customerPagePrice) {
                customerPagePrice.textContent = '+67 TK';
                const checkbox = document.querySelector('input[value="customer"]');
                if (checkbox) checkbox.setAttribute('data-price', '67');
            }

            if (brandingPrice) {
                brandingPrice.textContent = '+100 TK';
                const checkbox = document.querySelector('input[value="remove-branding"]');
                if (checkbox) checkbox.setAttribute('data-price', '100');
            }

            if (googleAuthPrice) {
                googleAuthPrice.textContent = '+23 TK';
            }
        }

        function toggleProMode(mode) {
            const buttons = document.querySelectorAll('.mode-toggle-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (mode === 'premium') {
                document.body.classList.add('pro-mode');
                buttons[1].classList.add('active');
                showToast('Switched to Premium Pro Mode', 'success');
            } else {
                document.body.classList.remove('pro-mode');
                buttons[0].classList.add('active');
                showToast('Switched to Basic Pro Mode', 'success');
            }
        }

        // ========================================
        // USER INTERFACE MANAGEMENT
        // ========================================
        function updateUserInterface(user) {
            const userSection = document.getElementById('userSection');
            const authSection = document.getElementById('authSection');
            const userProfileSection = document.getElementById('userProfileSection');

            if (user) {
                // User is logged in
                userSection.innerHTML = `
                    <div class="user-info">
                        <img src="${user.photoURL || 'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=48&h=48&dpr=1'}" 
                             alt="User Avatar" class="user-avatar">
                        <span>${user.displayName || user.email.split('@')[0]}</span>
                    </div>
                `;
                
                // Update account page
                if (authSection) authSection.style.display = 'none';
                if (userProfileSection) userProfileSection.style.display = 'block';
                
                // Update profile info
                const userAvatar = document.getElementById('userAvatar');
                const userName = document.getElementById('userName');
                const userEmailDisplay = document.getElementById('userEmailDisplay');
                const userUIDDisplay = document.getElementById('userUIDDisplay');
                
                if (userAvatar) userAvatar.src = user.photoURL || 'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&dpr=1';
                if (userName) userName.textContent = user.displayName || user.email.split('@')[0];
                if (userEmailDisplay) userEmailDisplay.textContent = user.email;
                if (userUIDDisplay) userUIDDisplay.textContent = user.uid;
            } else {
                // User is not logged in
                userSection.innerHTML = '<button class="login-btn" onclick="showPage(\'account\')">Login / Sign Up</button>';
                
                // Update account page
                if (authSection) authSection.style.display = 'block';
                if (userProfileSection) userProfileSection.style.display = 'none';
                
                // Reset UID display
                const userUIDDisplay = document.getElementById('userUIDDisplay');
                if (userUIDDisplay) userUIDDisplay.textContent = 'Not logged in';
            }
        }

        // Auto-fill user data in forms
        function autoFillUserData(user) {
            if (!user) return;
            
            // Helper function to safely set values
            const safeSetValue = (id, value) => {
                const element = document.getElementById(id);
                if (element && value) element.value = value;
            };
            
            // Auto-fill order form
            safeSetValue('customerName', user.displayName);
            safeSetValue('customerEmail', user.email);
            safeSetValue('userEmail', user.email);
            safeSetValue('userUID', user.uid);

            // Auto-fill premium form
            safeSetValue('premiumEmailInput', user.email);
            safeSetValue('premiumUserEmail', user.email);
            safeSetValue('premiumUserUID', user.uid);

            // Auto-fill premium pro form
            safeSetValue('premiumProName', user.displayName);
            safeSetValue('premiumProEmail', user.email);
            safeSetValue('premiumProUserEmail', user.email);
            safeSetValue('premiumProUserUID', user.uid);
            safeSetValue('premiumProUID', user.uid); // New UID field

            // Auto-fill missed product form
            safeSetValue('missedProductEmail', user.email);
        }

        // Copy User UID function
        function copyUserUID() {
            const uidElement = document.getElementById('userUIDDisplay');
            if (!uidElement) return;
            
            const uid = uidElement.textContent;
            
            if (uid === 'Not logged in') {
                showToast('Please log in first to get your UID', 'error');
                return;
            }
            
            // Prevent any default behavior
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const btn = event ? event.target : null;
            const originalText = btn ? btn.textContent : 'Copy';
            
            // Modern Clipboard API with fallback
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(uid)
                    .then(() => {
                        updateCopyButton(btn, originalText, true);
                        showToast('UID copied to clipboard! Use this when purchasing Premium Pro.', 'success');
                    })
                    .catch(() => {
                        fallbackCopy(uid, btn, originalText);
                    });
            } else {
                fallbackCopy(uid, btn, originalText);
            }
        }

        // ========================================
        // AUTHENTICATION FUNCTIONS
        // ========================================
        function switchAuthTab(tab) {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const tabs = document.querySelectorAll('.auth-tab');

            tabs.forEach(t => t.classList.remove('active'));
            
            if (tab === 'login') {
                loginForm.classList.add('active');
                signupForm.classList.remove('active');
                tabs[0].classList.add('active');
            } else {
                signupForm.classList.add('active');
                loginForm.classList.remove('active');
                tabs[1].classList.add('active');
            }
        }

        function handleEmailLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }

            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }

            window.firebaseAuth.signInWithEmailAndPassword(window.firebaseAuth.auth, email, password)
                .then((userCredential) => {
                    showToast('Login successful!', 'success');
                    currentUser = userCredential.user;
                })
                .catch((error) => {
                    console.error('Login error:', error);
                    showToast(getFirebaseErrorMessage(error.code), 'error');
                });
        }

        function handleEmailSignup() {
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (!email || !password || !confirmPassword) {
                showToast('Please fill in all fields', 'error');
                return;
            }

            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }

            if (password.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }

            window.firebaseAuth.createUserWithEmailAndPassword(window.firebaseAuth.auth, email, password)
                .then((userCredential) => {
                    showToast('Account created successfully!', 'success');
                    currentUser = userCredential.user;
                })
                .catch((error) => {
                    console.error('Signup error:', error);
                    showToast(getFirebaseErrorMessage(error.code), 'error');
                });
        }

        function handleGoogleLogin() {
            window.firebaseAuth.signInWithPopup(window.firebaseAuth.auth, window.firebaseAuth.googleProvider)
                .then((result) => {
                    showToast('Logged in with Google!', 'success');
                    currentUser = result.user;
                })
                .catch((error) => {
                    console.error('Google login error:', error);
                    showToast(getFirebaseErrorMessage(error.code), 'error');
                });
        }

        function handleLogout() {
            window.firebaseAuth.signOut(window.firebaseAuth.auth)
                .then(() => {
                    showToast('Logged out successfully!', 'success');
                    currentUser = null;
                })
                .catch((error) => {
                    console.error('Logout error:', error);
                    showToast('Error logging out. Please try again.', 'error');
                });
        }

        function handleForgotPassword() {
            const email = document.getElementById('loginEmail').value.trim();
            
            if (!email) {
                showToast('Please enter your email address first', 'error');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }

            window.firebaseAuth.sendPasswordResetEmail(window.firebaseAuth.auth, email)
                .then(() => {
                    showToast('Password reset email sent!', 'success');
                })
                .catch((error) => {
                    console.error('Password reset error:', error);
                    showToast(getFirebaseErrorMessage(error.code), 'error');
                });
        }

        // Helper function to get user-friendly Firebase error messages
        function getFirebaseErrorMessage(errorCode) {
            const errorMessages = {
                'auth/user-not-found': 'No account found with this email address.',
                'auth/wrong-password': 'Incorrect password. Please try again.',
                'auth/email-already-in-use': 'An account with this email already exists.',
                'auth/weak-password': 'Password is too weak. Please choose a stronger password.',
                'auth/invalid-email': 'Please enter a valid email address.',
                'auth/user-disabled': 'This account has been disabled.',
                'auth/too-many-requests': 'Too many failed attempts. Please try again later.',
                'auth/network-request-failed': 'Network error. Please check your connection.',
                'auth/popup-closed-by-user': 'Sign-in popup was closed before completion.',
                'auth/cancelled-popup-request': 'Sign-in was cancelled.',
                'auth/popup-blocked': 'Sign-in popup was blocked by browser.'
            };
            
            return errorMessages[errorCode] || 'An error occurred. Please try again.';
        }

        // ========================================
        // TOAST NOTIFICATION SYSTEM
        // ========================================
        function showToast(message, type = 'info', duration = 4000) {
            // Remove existing toasts to prevent stacking
            const existingToasts = document.querySelectorAll('.toast');
            existingToasts.forEach(toast => toast.remove());
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '',
                error: '',
                warning: '',
                info: ''
            };
            
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 16px;">
                    <span style="font-size: 22px;">${icons[type] || icons.info}</span>
                    <span style="font-weight: 600;">${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto remove
            const removeToast = () => {
                if (toast.parentNode) {
                    toast.style.animation = 'professionalScale 0.4s reverse';
                    setTimeout(() => {
                        if (toast.parentNode) toast.remove();
                    }, 400);
                }
            };
            
            setTimeout(removeToast, duration);
            
            // Click to dismiss
            toast.addEventListener('click', removeToast);
        }

        // ========================================
        // ENHANCED COPY FUNCTION
        // ========================================
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            const text = element.value || element.textContent;
            
            // Prevent any default behavior
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const btn = event ? event.target : null;
            const originalText = btn ? btn.textContent : 'Copy';
            
            // Modern Clipboard API with fallback
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text)
                    .then(() => {
                        updateCopyButton(btn, originalText, true);
                        showToast('Copied to clipboard successfully!', 'success');
                    })
                    .catch(() => {
                        fallbackCopy(text, btn, originalText);
                    });
            } else {
                fallbackCopy(text, btn, originalText);
            }
        }

        function fallbackCopy(text, btn, originalText) {
            try {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                
                textArea.focus();
                textArea.select();
                textArea.setSelectionRange(0, 99999); // For mobile devices
                
                const successful = document.execCommand('copy');
                document.body.removeChild(textArea);
                
                if (successful) {
                    updateCopyButton(btn, originalText, true);
                    showToast('Copied to clipboard successfully!', 'success');
                } else {
                    throw new Error('Copy command failed');
                }
            } catch (err) {
                console.error('Copy failed:', err);
                showToast('Copy failed. Please copy manually.', 'error');
                updateCopyButton(btn, originalText, false);
            }
        }

        function updateCopyButton(btn, originalText, success) {
            if (!btn) return;
            
            if (success) {
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            }
        }

        function copyPaymentAddress(address) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            const btn = event ? event.target : null;
            const originalText = btn ? btn.textContent : 'Copy';
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(address)
                    .then(() => {
                        updateCopyButton(btn, originalText, true);
                        showToast('Payment address copied successfully!', 'success');
                    })
                    .catch(() => {
                        fallbackCopy(address, btn, originalText);
                    });
            } else {
                fallbackCopy(address, btn, originalText);
            }
        }

        // ========================================
        // ENHANCED THEME MANAGEMENT
        // ========================================
        function changeTheme(theme) {
            try {
                document.body.className = `theme-${theme}`;
                if (premiumStatus && premiumStatus.active) {
                    document.body.classList.add('pro-mode');
                }
                localStorage.setItem('selectedTheme', theme);
                
                // Update theme selection visual
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                const selectedOption = document.querySelector(`[data-theme="${theme}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
                
                // Theme-specific toast messages
                const themeNames = {
                    'default': 'Executive Elite',
                    'platinum-business': 'Platinum Business',
                    'royal-emerald': 'Royal Emerald',
                    'crimson-executive': 'Crimson Executive',
                    'sunset-luxury': 'Sunset Luxury',
                    'gold-standard': 'Gold Standard',
                    'purple-royalty': 'Purple Royalty'
                };
                
                showToast(`Theme changed to ${themeNames[theme] || theme}!`, 'success');
            } catch (error) {
                console.error('Theme change error:', error);
                showToast('Failed to change theme', 'error');
            }
        }

        function loadTheme() {
            try {
                const savedTheme = localStorage.getItem('selectedTheme') || 'default';
                document.body.className = `theme-${savedTheme}`;
                
                // Apply pro mode if premium is active
                if (premiumStatus && premiumStatus.active) {
                    document.body.classList.add('pro-mode');
                }
                
                // Update theme selection visual with delay to ensure DOM is ready
                setTimeout(() => {
                    const themeOption = document.querySelector(`[data-theme="${savedTheme}"]`);
                    if (themeOption) {
                        themeOption.classList.add('selected');
                    }
                }, 100);
            } catch (error) {
                console.error('Theme load error:', error);
                // Fallback to default theme
                document.body.className = 'theme-default';
            }
        }

        // ========================================
        // NAVIGATION MANAGEMENT
        // ========================================
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('active');
            }
        }

        function showPage(pageId) {
            try {
                // Hide all pages
                const pages = document.querySelectorAll('.page');
                pages.forEach(page => page.classList.remove('active'));
                
                // Show selected page
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.classList.add('active');
                }
                
                // Close sidebar
                const sidebar = document.getElementById('sidebar');
                if (sidebar) {
                    sidebar.classList.remove('active');
                }
                
                // Scroll to top with smooth behavior
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                console.error('Page navigation error:', error);
            }
        }

        // ========================================
        // ORDER MANAGEMENT SYSTEM
        // ========================================
        function startOrder(type) {
            try {
                let basePrice = type === 'website' ? 999 : 1120;
                
                // Apply premium discount if active
                if (premiumStatus && premiumStatus.active) {
                    basePrice = Math.round(basePrice * 0.65); // 35% discount
                }
                
                currentOrder = {
                    type: type,
                    category: '',
                    format: '',
                    pages: [],
                    features: [],
                    benefits: [],
                    products: [],
                    customerPaymentMethods: [],
                    authMethods: [],
                    firebaseInfo: {},
                    totalPrice: basePrice
                };
                
                // Reset global arrays
                products = [];
                customerPaymentMethods = [];
                selectedAuthMethods = [];
                
                const orderProcess = document.getElementById('orderProcess');
                const categorySelection = document.getElementById('categorySelection');
                const formatSelection = document.getElementById('formatSelection');
                
                if (orderProcess) orderProcess.style.display = 'block';
                if (categorySelection) categorySelection.style.display = 'block';
                
                // Show format selection for apps
                if (formatSelection) {
                    formatSelection.style.display = type === 'app' ? 'block' : 'none';
                }

                updateSelectionSummary();
                
                // Smooth scroll to order process
                setTimeout(() => {
                    if (orderProcess) {
                        orderProcess.scrollIntoView({ behavior: 'smooth' });
                    }
                }, 300);
            } catch (error) {
                console.error('Start order error:', error);
                showToast('Failed to start order process', 'error');
            }
        }

        function selectFormat(format) {
            currentOrder.format = format;
            
            // Update UI
            document.querySelectorAll('#formatSelection .selection-card').forEach(option => {
                option.classList.remove('selected');
            });
            
            if (event && event.target) {
                const card = event.target.closest('.selection-card');
                if (card) card.classList.add('selected');
            }
            
            updateSelectionSummary();
        }

        function selectCategory(category) {
            currentOrder.category = category;
            
            // Update UI
            document.querySelectorAll('#categorySelection .selection-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            if (event && event.target) {
                const card = event.target.closest('.selection-card');
                if (card) card.classList.add('selected');
            }
            
            // Show page selection
            setTimeout(() => {
                const pageSelection = document.getElementById('pageSelection');
                if (pageSelection) {
                    pageSelection.style.display = 'block';
                    pageSelection.scrollIntoView({ behavior: 'smooth' });
                }
                updateSelectionSummary();
            }, 300);
        }

        function showFeatures() {
            const featuresDiv = document.getElementById('categoryFeatures');
            let featuresHTML = '<ul class="feature-list">';
            
            if (currentOrder.category === 'clothing') {
                featuresHTML += `
                    <li class="feature-item">
                        <span>Clothes Size Selection</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="clothes-size" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Clothes Color Options</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); margin-right: 16px; font-weight: 700;">+${premiumStatus && premiumStatus.active ? Math.round(32 * 0.65) : 32} TK</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="clothes-colors" data-price="${premiumStatus && premiumStatus.active ? Math.round(32 * 0.65) : 32}" onchange="updateSelections()">
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Lifetime Coupon System</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="lifetime-coupon" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Custom Splash Screen</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="splash-screen" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Order Form to Email</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="order-email" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                `;
            } else if (currentOrder.category === 'subscription') {
                featuresHTML += `
                    <li class="feature-item">
                        <span>Products With Images</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="product-images" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Product Status Tracking</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="product-status" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Custom Splash Screen</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="splash-screen" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Order Form to Email</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="order-email" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                `;
            } else if (currentOrder.category === 'computer') {
                featuresHTML += `
                    <li class="feature-item">
                        <span>Lifetime Coupon System</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); margin-right: 16px; font-weight: 700;">+${premiumStatus && premiumStatus.active ? Math.round(120 * 0.65) : 120} TK</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="lifetime-coupon" data-price="${premiumStatus && premiumStatus.active ? Math.round(120 * 0.65) : 120}" onchange="updateSelections()">
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Custom Splash Screen</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="splash-screen" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                    <li class="feature-item">
                        <span>Order Form to Email</span>
                        <div style="display: flex; align-items: center;">
                            <span style="color: var(--accent-primary); font-weight: 700; margin-right: 16px;">Free</span>
                            <input type="checkbox" class="feature-checkbox" name="features" value="order-email" data-price="0" onchange="updateSelections()" checked>
                        </div>
                    </li>
                `;
            }
            
            featuresHTML += '</ul>';
            featuresDiv.innerHTML = featuresHTML;
            
            const featuresSelection = document.getElementById('featuresSelection');
            if (featuresSelection) {
                featuresSelection.style.display = 'block';
                featuresSelection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function showBenefits() {
            const benefitsSelection = document.getElementById('benefitsSelection');
            if (benefitsSelection) {
                benefitsSelection.style.display = 'block';
                benefitsSelection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function showProducts() {
            const productManagement = document.getElementById('productManagement');
            if (productManagement) {
                productManagement.style.display = 'block';
                productManagement.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // ========================================
        // PRODUCT MANAGEMENT
        // ========================================
        function addProduct() {
            const name = document.getElementById('productName').value.trim();
            const price = document.getElementById('productPrice').value.trim();
            const imageUrl = document.getElementById('productImageUrl').value.trim();
            const description = document.getElementById('productDescription').value.trim();
            
            if (!name || !price) {
                showToast('Please enter product name and price', 'error');
                return;
            }
            
            if (isNaN(price) || parseFloat(price) <= 0) {
                showToast('Please enter a valid price', 'error');
                return;
            }
            
            if (products.length >= 100) {
                showToast('Maximum 100 products allowed', 'warning');
                return;
            }
            
            products.push({ name, price, imageUrl, description });
            updateProductList();
            
            // Clear form
            document.getElementById('productName').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productImageUrl').value = '';
            document.getElementById('productDescription').value = '';
            
            showToast('Product added successfully!', 'success');
        }

        function updateProductList() {
            const listDiv = document.getElementById('productList');
            if (!listDiv) return;
            
            let html = '';
            
            products.forEach((product, index) => {
                html += `
                    <div class="product-item">
                        ${product.imageUrl ? `<img src="${product.imageUrl}" alt="${product.name}" class="product-image" onerror="this.style.display='none'">` : ''}
                        <div class="product-details">
                            <div class="product-name">${product.name}</div>
                            <div class="product-price">${product.price} TK</div>
                            <div style="font-size: 14px; color: var(--text-muted); margin-top: 6px; font-weight: 500;">${product.description}</div>
                            ${product.imageUrl ? `<div style="font-size: 12px; color: var(--text-secondary); margin-top: 6px;">Image: ${product.imageUrl}</div>` : ''}
                        </div>
                        <button class="delete-btn" onclick="removeProduct(${index})">Delete</button>
                    </div>
                `;
            });
            
            listDiv.innerHTML = html;
        }

        function removeProduct(index) {
            if (index >= 0 && index < products.length) {
                products.splice(index, 1);
                updateProductList();
                showToast('Product removed successfully!', 'success');
            }
        }

        // ========================================
        // PAYMENT & AUTHENTICATION METHODS
        // ========================================
        function showPaymentMethods() {
            const paymentMethodsSelection = document.getElementById('paymentMethodsSelection');
            const websiteAuthMethods = document.getElementById('websiteAuthMethods');
            
            if (paymentMethodsSelection) {
                paymentMethodsSelection.style.display = 'block';
                
                // Show auth methods only for website orders
                if (websiteAuthMethods) {
                    websiteAuthMethods.style.display = currentOrder.type === 'website' ? 'block' : 'none';
                }
                
                paymentMethodsSelection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function selectPaymentMethod(method) {
            const element = event.target.closest('.payment-method');
            if (!element) return;
            
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                // Remove from selected methods
                customerPaymentMethods = customerPaymentMethods.filter(m => m.method !== method);
            } else {
                element.classList.add('selected');
                // Add to selected methods (will add details later)
                customerPaymentMethods.push({ method, details: '' });
            }
            
            updatePaymentDetails();
            updateSelectionSummary();
        }

        function selectAuthMethod(method) {
            const element = event.target.closest('.auth-method-option');
            if (!element) return;
            
            if (element.classList.contains('selected')) {
                element.classList.remove('selected');
                selectedAuthMethods = selectedAuthMethods.filter(m => m !== method);
                
                // Hide Firebase info if no methods selected
                if (selectedAuthMethods.length === 0) {
                    const firebaseInfoSection = document.getElementById('firebaseInfoSection');
                    if (firebaseInfoSection) firebaseInfoSection.style.display = 'none';
                }
            } else {
                element.classList.add('selected');
                selectedAuthMethods.push(method);
                
                // Show Firebase info section
                const firebaseInfoSection = document.getElementById('firebaseInfoSection');
                if (firebaseInfoSection) firebaseInfoSection.style.display = 'block';
            }
            
            // Update total price
            updateSelections();
            updateSelectionSummary();
        }

        function updatePaymentDetails() {
            const detailsDiv = document.getElementById('paymentDetails');
            if (!detailsDiv) return;
            
            let html = '';
            
            if (customerPaymentMethods.length > 0) {
                html += '<h4 style="color: var(--accent-primary); margin: 24px 0 20px 0; font-weight: 700; font-family: var(--font-display);">Configure Your Payment Methods</h4>';
                html += '<p style="color: var(--text-secondary); margin-bottom: 24px; font-weight: 500;">Enter your payment details that customers will use to send money to you</p>';
                
                customerPaymentMethods.forEach((paymentMethod, index) => {
                    const method = paymentMethod.method;
                    const displayName = method.charAt(0).toUpperCase() + method.slice(1);
                    
                    html += `
                        <div class="payment-details-input">
                            <h5 style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">${displayName}</h5>
                    `;
                    
                    if (['bkash', 'nagad', 'rocket'].includes(method)) {
                        html += `
                            <div class="form-group">
                                <label class="form-label">Your ${displayName} Phone Number *</label>
                                <input type="text" class="form-input" placeholder="Enter your ${displayName} number (e.g., +8801234567890)" 
                                       onchange="updateCustomerPaymentMethod(${index}, this.value)" required>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="form-group">
                                <label class="form-label">Your ${displayName} Address *</label>
                                <input type="text" class="form-input" placeholder="Enter your ${displayName} wallet address" 
                                       onchange="updateCustomerPaymentMethod(${index}, this.value)" required>
                            </div>
                        `;
                    }
                    
                    html += '</div>';
                });
            }
            
            detailsDiv.innerHTML = html;
        }

        function updateCustomerPaymentMethod(index, value) {
            if (customerPaymentMethods[index]) {
                customerPaymentMethods[index].details = value;
                currentOrder.customerPaymentMethods = customerPaymentMethods;
            }
        }

        // ========================================
        // ORDER PROCESSING
        // ========================================
        function showOrderDetails() {
            // Validate that all selected payment methods have details
            const incompletePayments = customerPaymentMethods.filter(pm => !pm.details.trim());
            if (incompletePayments.length > 0) {
                showToast('Please complete all payment method details before continuing.', 'error');
                return;
            }
            
            // Validate Firebase info if auth methods selected
            if (selectedAuthMethods.length > 0 && currentOrder.type === 'website') {
                const firebaseGmail = document.getElementById('firebaseGmail');
                const firebasePassword = document.getElementById('firebasePassword');
                
                if (!firebaseGmail || !firebasePassword || !firebaseGmail.value.trim() || !firebasePassword.value.trim()) {
                    showToast('Please provide Firebase account details for authentication setup.', 'error');
                    return;
                }
                
                currentOrder.firebaseInfo = {
                    gmail: firebaseGmail.value.trim(),
                    password: firebasePassword.value.trim()
                };
            }
            
            generateOrderId();
            updateOrderSummary();
            
            // Auto-fill with current user data if logged in
            if (currentUser) {
                autoFillUserData(currentUser);
            }
            
            const orderDetails = document.getElementById('orderDetails');
            if (orderDetails) {
                orderDetails.style.display = 'block';
                orderDetails.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function generateOrderId() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let orderId = 'ORD-';
            
            // Add timestamp
            const now = new Date();
            orderId += now.getFullYear().toString().slice(-2);
            orderId += (now.getMonth() + 1).toString().padStart(2, '0');
            orderId += now.getDate().toString().padStart(2, '0');
            orderId += '-';
            
            // Generate random characters
            for (let i = 0; i < 8; i++) {
                orderId += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            const orderIdField = document.getElementById('orderId');
            if (orderIdField) orderIdField.value = orderId;
        }

        function updateOrderSummary() {
            const summaryDiv = document.getElementById('orderSummaryContent');
            if (!summaryDiv) return;
            
            let html = '';
            
            html += `
                <div class="summary-item">
                    <span>${currentOrder.type === 'website' ? 'Website' : 'App'} Development (${currentOrder.category})</span>
                    <span>${currentOrder.type === 'website' ? (premiumStatus && premiumStatus.active ? Math.round(999 * 0.65) : 999) : (premiumStatus && premiumStatus.active ? Math.round(1120 * 0.65) : 1120)} TK</span>
                </div>
            `;
            
            if (currentOrder.format && currentOrder.format !== 'N/A') {
                html += `
                    <div class="summary-item">
                        <span>App Format: ${currentOrder.format.toUpperCase()}</span>
                        <span>Included</span>
                    </div>
                `;
            }
            
            // Add selected pages with prices
            currentOrder.pages.forEach(page => {
                html += `
                    <div class="summary-item">
                        <span>${page.name}</span>
                        <span>${page.price > 0 ? '+' + page.price + ' TK' : 'Included'}</span>
                    </div>
                `;
            });
            
            // Add selected features with prices
            currentOrder.features.forEach(feature => {
                html += `
                    <div class="summary-item">
                        <span>${feature.name}</span>
                        <span>${feature.price > 0 ? '+' + feature.price + ' TK' : 'Included'}</span>
                    </div>
                `;
            });
            
            // Add selected benefits with prices
            currentOrder.benefits.forEach(benefit => {
                html += `
                    <div class="summary-item">
                        <span>${benefit.name}</span>
                        <span>${benefit.price > 0 ? '+' + benefit.price + ' TK' : (premiumStatus && premiumStatus.active ? 'FREE (Premium)' : '+' + benefit.price + ' TK')}</span>
                    </div>
                `;
            });
            
            // Add auth methods pricing
            selectedAuthMethods.forEach(method => {
                let price = method === 'google' ? 23 : 0;
                if (premiumStatus && premiumStatus.active && price > 0) {
                    price = Math.round(price * 0.65);
                }
                const displayName = method === 'google' ? 'Google Sign-In' : 'Email/Password';
                html += `
                    <div class="summary-item">
                        <span>${displayName} Authentication</span>
                        <span>${price > 0 ? '+' + price + ' TK' : 'Free'}</span>
                    </div>
                `;
            });

            // Add premium discount line if applicable
            if (premiumStatus && premiumStatus.active) {
                html += `
                    <div class="summary-item" style="color: #10b981;">
                        <span> Premium Pro Discount (35%)</span>
                        <span>Applied</span>
                    </div>
                `;
            }
            
            html += `
                <div class="summary-item summary-total">
                    <span>Total Amount</span>
                    <span>${currentOrder.totalPrice} TK</span>
                </div>
            `;
            
            summaryDiv.innerHTML = html;
            
            // Update form fields
            updateHiddenFormFields();
        }

        function updateHiddenFormFields() {
            // Helper function to safely set hidden field values
            const safeSetHiddenField = (id, value) => {
                const field = document.getElementById(id);
                if (field) field.value = typeof value === 'object' ? JSON.stringify(value) : value;
            };
            
            // Set product name and hidden fields
            const orderProductNameField = document.getElementById('orderProductName');
            if (orderProductNameField) {
                orderProductNameField.value = `${currentOrder.type === 'website' ? 'Website' : 'App'} Development (${currentOrder.category})`;
            }
            
            // Update all hidden fields
            safeSetHiddenField('orderType', currentOrder.type);
            safeSetHiddenField('orderCategory', currentOrder.category);
            safeSetHiddenField('orderFormat', currentOrder.format || 'N/A');
            safeSetHiddenField('selectedPages', currentOrder.pages);
            safeSetHiddenField('selectedFeatures', currentOrder.features);
            safeSetHiddenField('selectedBenefits', currentOrder.benefits);
            safeSetHiddenField('customerPaymentMethods', customerPaymentMethods);
            safeSetHiddenField('selectedAuthMethods', selectedAuthMethods);
            safeSetHiddenField('firebaseInfo', currentOrder.firebaseInfo);
            safeSetHiddenField('orderProducts', products);
            safeSetHiddenField('orderTotal', currentOrder.totalPrice);
            safeSetHiddenField('isPremiumUser', premiumStatus && premiumStatus.active ? 'Yes' : 'No');
            safeSetHiddenField('appliedDiscount', premiumStatus && premiumStatus.active ? '35%' : 'None');
        }

        function updateSelections() {
            // Clear current selections
            currentOrder.pages = [];
            currentOrder.features = [];
            currentOrder.benefits = [];
            
            let basePrice = currentOrder.type === 'website' ? 999 : 1120;
            
            // Apply premium discount to base price
            if (premiumStatus && premiumStatus.active) {
                basePrice = Math.round(basePrice * 0.65);
            }
            
            let total = basePrice;
            
            // Helper function to collect checked items
            const collectCheckedItems = (selector, targetArray) => {
                document.querySelectorAll(selector).forEach(checkbox => {
                    if (checkbox.checked) {
                        let price = parseInt(checkbox.dataset.price) || 0;
                        const name = checkbox.closest('.feature-item').querySelector('span').textContent;
                        
                        // Apply premium discount to benefits (except branding removal which becomes free)
                        if (premiumStatus && premiumStatus.active && checkbox.value === 'remove-branding') {
                            price = 0; // Free for premium users
                        }
                        
                        targetArray.push({ name, price, value: checkbox.value });
                        total += price;
                    }
                });
            };
            
            // Collect selections
            collectCheckedItems('input[name="defaultPages"]:checked', currentOrder.pages);
            collectCheckedItems('input[name="pages"]:checked', currentOrder.pages);
            collectCheckedItems('input[name="features"]:checked', currentOrder.features);
            collectCheckedItems('input[name="benefits"]:checked', currentOrder.benefits);
            
            // Add auth method pricing
            selectedAuthMethods.forEach(method => {
                if (method === 'google') {
                    let price = 23;
                    if (premiumStatus && premiumStatus.active) {
                        price = Math.round(price * 0.65);
                    }
                    total += price;
                }
            });
            
            currentOrder.totalPrice = total;
            updateSelectionSummary();
            
            // Update feature item selections visually
            document.querySelectorAll('.feature-item').forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                if (checkbox && checkbox.checked) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });
        }

        function updateSelectionSummary() {
            const summaryDiv = document.getElementById('selectionSummary');
            const contentDiv = document.getElementById('summaryContent');
            
            if (!summaryDiv || !contentDiv) return;
            
            let html = '';
            
            if (currentOrder.type) {
                html += `<span class="selection-tag">${currentOrder.type === 'website' ? 'Website' : 'App'} Development</span>`;
            }
            
            if (currentOrder.category) {
                html += `<span class="selection-tag">${currentOrder.category}</span>`;
            }
            
            if (currentOrder.format) {
                html += `<span class="selection-tag">${currentOrder.format.toUpperCase()}</span>`;
            }
            
            currentOrder.pages.forEach(page => {
                html += `<span class="selection-tag">${page.name}</span>`;
            });
            
            currentOrder.features.forEach(feature => {
                html += `<span class="selection-tag">${feature.name}</span>`;
            });
            
            currentOrder.benefits.forEach(benefit => {
                html += `<span class="selection-tag">${benefit.name}</span>`;
            });
            
            customerPaymentMethods.forEach(method => {
                html += `<span class="selection-tag">${method.method.toUpperCase()}</span>`;
            });
            
            selectedAuthMethods.forEach(method => {
                html += `<span class="selection-tag">${method === 'google' ? 'Google Auth' : 'Email Auth'}</span>`;
            });

            if (premiumStatus && premiumStatus.active) {
                html += `<span class="selection-tag" style="background: #10b981;"> Premium Pro</span>`;
            }
            
            if (html) {
                contentDiv.innerHTML = html;
                summaryDiv.style.display = 'block';
            } else {
                summaryDiv.style.display = 'none';
            }
        }

        // ========================================
        // PAYMENT INFORMATION DISPLAY
        // ========================================
        function showPaymentInfo() {
            const method = document.getElementById('orderPaymentMethod').value;
            const infoDiv = document.getElementById('paymentInfo');
            const transactionGroup = document.getElementById('transactionGroup');
            const transactionLabel = document.getElementById('transactionLabel');
            
            if (!method) {
                if (infoDiv) infoDiv.style.display = 'none';
                if (transactionGroup) transactionGroup.style.display = 'none';
                return;
            }
            
            const address = ourPaymentAddresses[method];
            let html = '';
            
            if (['bkash', 'nagad', 'rocket'].includes(method)) {
                html = `
                    <div class="payment-info-card">
                        <p style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">Send ${currentOrder.totalPrice} TK to ${method.toUpperCase()}:</p>
                        <div class="payment-address">
                            <span class="payment-address-text">${address}</span>
                            <button type="button" class="copy-btn" onclick="copyPaymentAddress('${address}')">Copy</button>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 16px; font-weight: 500;">After sending money, enter the transaction ID below</p>
                    </div>
                `;
                if (transactionLabel) transactionLabel.textContent = 'Transaction ID *';
            } else {
                const displayName = method.charAt(0).toUpperCase() + method.slice(1);
                html = `
                    <div class="payment-info-card">
                        <p style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">Send ${displayName} to this address:</p>
                        <div class="payment-address">
                            <span class="payment-address-text">${address}</span>
                            <button type="button" class="copy-btn" onclick="copyPaymentAddress('${address}')">Copy</button>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 16px; font-weight: 500;">After sending crypto, enter the transaction hash below</p>
                    </div>
                `;
                if (transactionLabel) transactionLabel.textContent = 'Transaction Hash (TXID) *';
            }
            
            if (infoDiv) {
                infoDiv.innerHTML = html;
                infoDiv.style.display = 'block';
            }
            if (transactionGroup) transactionGroup.style.display = 'block';
        }

        function showPremiumPaymentInfo() {
            const method = document.getElementById('premiumPaymentMethod').value;
            const infoDiv = document.getElementById('premiumPaymentInfo');
            const transactionGroup = document.getElementById('premiumTransactionGroup');
            const transactionLabel = document.getElementById('premiumTransactionLabel');
            const transactionIdField = document.getElementById('premiumTransactionId');
            
            if (!method) {
                if (infoDiv) infoDiv.style.display = 'none';
                if (transactionGroup) transactionGroup.style.display = 'none';
                return;
            }
            
            const address = ourPaymentAddresses[method];
            let html = '';
            
            if (['bkash', 'nagad', 'rocket'].includes(method)) {
                html = `
                    <div class="payment-info-card">
                        <p style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">Send 120 TK to ${method.toUpperCase()}:</p>
                        <div class="payment-address">
                            <span class="payment-address-text">${address}</span>
                            <button type="button" class="copy-btn" onclick="copyPaymentAddress('${address}')">Copy</button>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 16px; font-weight: 500;">After sending money, enter the transaction ID below</p>
                    </div>
                `;
                if (transactionLabel) transactionLabel.textContent = 'Transaction ID *';
                if (transactionIdField) transactionIdField.required = true;
            } else {
                const displayName = method.charAt(0).toUpperCase() + method.slice(1);
                html = `
                    <div class="payment-info-card">
                        <p style="color: var(--text-primary); margin-bottom: 16px; font-weight: 700;">Send ${displayName} to this address:</p>
                        <div class="payment-address">
                            <span class="payment-address-text">${address}</span>
                            <button type="button" class="copy-btn" onclick="copyPaymentAddress('${address}')">Copy</button>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 16px; font-weight: 500;">After sending crypto, enter the transaction hash below</p>
                    </div>
                `;
                if (transactionLabel) transactionLabel.textContent = 'Transaction Hash (TXID) *';
                if (transactionIdField) transactionIdField.required = true;
            }
            
            if (infoDiv) {
                infoDiv.innerHTML = html;
                infoDiv.style.display = 'block';
            }
            if (transactionGroup) transactionGroup.style.display = 'block';
        }

        // ========================================
        // ORDER STORAGE & HISTORY
        // ========================================
        function saveOrder() {
            try {
                const orderIdField = document.getElementById('orderId');
                const orderProductNameField = document.getElementById('orderProductName');
                const customerNameField = document.getElementById('customerName');
                
                const order = {
                    id: orderIdField ? orderIdField.value : 'N/A',
                    productName: orderProductNameField ? orderProductNameField.value : 'N/A',
                    customerName: customerNameField ? customerNameField.value : 'N/A',
                    date: new Date().toLocaleDateString(),
                    status: 'Complete',
                    total: currentOrder.totalPrice,
                    type: currentOrder.type,
                    category: currentOrder.category,
                    format: currentOrder.format || 'N/A',
                    pages: currentOrder.pages,
                    features: currentOrder.features,
                    benefits: currentOrder.benefits,
                    customerPaymentMethods: customerPaymentMethods,
                    authMethods: selectedAuthMethods,
                    firebaseInfo: currentOrder.firebaseInfo,
                    products: products,
                    userEmail: currentUser ? currentUser.email : null,
                    userId: currentUser ? currentUser.uid : null,
                    isPremiumUser: premiumStatus && premiumStatus.active,
                    appliedDiscount: premiumStatus && premiumStatus.active ? '35%' : 'None'
                };
                
                let orders = JSON.parse(localStorage.getItem('userOrders') || '[]');
                orders.push(order);
                localStorage.setItem('userOrders', JSON.stringify(orders));
            } catch (error) {
                console.error('Save order error:', error);
            }
        }

        function loadOrders() {
            try {
                const orders = JSON.parse(localStorage.getItem('userOrders') || '[]');
                const ordersDiv = document.getElementById('userOrders');
                
                if (!ordersDiv) return;
                
                if (orders.length === 0) {
                    ordersDiv.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 24px; font-weight: 500;">No orders found.</p>';
                    return;
                }
                
                let html = '';
                orders.forEach(order => {
                    html += `
                        <div class="card" style="margin-bottom: 20px; padding: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;">
                                <h4 style="color: var(--accent-primary); margin: 0; font-weight: 700; font-family: var(--font-display);">${order.productName}</h4>
                                <div style="display: flex; gap: 8px;">
                                    <span style="background: var(--button-success); color: white; padding: 8px 16px; border-radius: 12px; font-size: 12px; font-weight: 700; text-transform: uppercase;">Complete</span>
                                    ${order.isPremiumUser ? '<span style="background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #000; padding: 8px 16px; border-radius: 12px; font-size: 12px; font-weight: 700; text-transform: uppercase;"> PREMIUM</span>' : ''}
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; color: var(--text-secondary); font-weight: 500;">
                                <p><strong>Order ID:</strong> ${order.id}</p>
                                <p><strong>Date:</strong> ${order.date}</p>
                                <p><strong>Total:</strong> <span style="color: var(--accent-primary); font-weight: 700;">${order.total} TK</span></p>
                                ${order.format !== 'N/A' ? `<p><strong>Format:</strong> ${order.format.toUpperCase()}</p>` : ''}
                                ${order.appliedDiscount !== 'None' ? `<p><strong>Discount:</strong> <span style="color: #10b981; font-weight: 700;">${order.appliedDiscount}</span></p>` : ''}
                            </div>
                            ${order.pages && order.pages.length > 0 ? `
                                <div style="margin-top: 16px;">
                                    <strong style="color: var(--text-primary); font-weight: 700;">Selected Pages:</strong>
                                    <div style="margin-top: 8px;">
                                        ${order.pages.map(page => `<span class="selection-tag">${page.name}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${order.features && order.features.length > 0 ? `
                                <div style="margin-top: 16px;">
                                    <strong style="color: var(--text-primary); font-weight: 700;">Selected Features:</strong>
                                    <div style="margin-top: 8px;">
                                        ${order.features.map(feature => `<span class="selection-tag">${feature.name}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${order.authMethods && order.authMethods.length > 0 ? `
                                <div style="margin-top: 16px;">
                                    <strong style="color: var(--text-primary); font-weight: 700;">Authentication Methods:</strong>
                                    <div style="margin-top: 8px;">
                                        ${order.authMethods.map(method => `<span class="selection-tag">${method === 'google' ? 'Google Auth' : 'Email Auth'}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${order.customerPaymentMethods && order.customerPaymentMethods.length > 0 ? `
                                <div style="margin-top: 16px;">
                                    <strong style="color: var(--text-primary); font-weight: 700;">Website/App Payment Methods:</strong>
                                    <div style="margin-top: 8px;">
                                        ${order.customerPaymentMethods.map(pm => `<span class="selection-tag">${pm.method.toUpperCase()}: ${pm.details}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${order.products && order.products.length > 0 ? `
                                <div style="margin-top: 16px;">
                                    <strong style="color: var(--text-primary); font-weight: 700;">Products (${order.products.length}):</strong>
                                    <div style="margin-top: 8px;">
                                        ${order.products.map(product => `<span class="selection-tag">${product.name} - ${product.price} TK</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                ordersDiv.innerHTML = html;
            } catch (error) {
                console.error('Load orders error:', error);
                const ordersDiv = document.getElementById('userOrders');
                if (ordersDiv) {
                    ordersDiv.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 24px;">Error loading orders.</p>';
                }
            }
        }

        // ========================================
        // FORM SUBMISSION HANDLERS
        // ========================================
        function setupFormHandlers() {
            // Order Form Submission
            const orderForm = document.getElementById('orderForm');
            if (orderForm) {
                orderForm.addEventListener('submit', function(e) {
                    const submitBtn = e.target.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    
                    // Show loading state
                    submitBtn.innerHTML = '<span class="loading"></span> Submitting Order...';
                    submitBtn.disabled = true;
                    
                    // Save order locally
                    saveOrder();
                    
                    // Show success message
                    showToast('Order submitted successfully! Redirecting to Formspree...', 'success');
                });
            }
            
            // Premium Form Submission
            const premiumForm = document.getElementById('premiumForm');
            if (premiumForm) {
                premiumForm.addEventListener('submit', function(e) {
                    const submitBtn = e.target.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    
                    // Show loading state
                    submitBtn.innerHTML = '<span class="loading"></span> Processing Purchase...';
                    submitBtn.disabled = true;
                    
                    // Auto-fill user data if logged in
                    if (currentUser) {
                        const premiumUserEmailField = document.getElementById('premiumUserEmail');
                        const premiumUserUIDField = document.getElementById('premiumUserUID');
                        
                        if (premiumUserEmailField) premiumUserEmailField.value = currentUser.email;
                        if (premiumUserUIDField) premiumUserUIDField.value = currentUser.uid;
                    }
                    
                    // Show success message
                    showToast('Premium purchase submitted successfully! Redirecting to Formspree...', 'success');
                });
            }

            // Premium Pro Form Submission
            const premiumProForm = document.getElementById('premiumProForm');
            if (premiumProForm) {
                premiumProForm.addEventListener('submit', function(e) {
                    const submitBtn = e.target.querySelector('button[type="submit"]');
                    const originalText = submitBtn.textContent;
                    
                    // Show loading state
                    submitBtn.innerHTML = '<span class="loading"></span> Processing Premium Pro Purchase...';
                    submitBtn.disabled = true;
                    
                    // Auto-fill user data if logged in
                    if (currentUser) {
                        const premiumProUserEmailField = document.getElementById('premiumProUserEmail');
                        const premiumProUserUIDField = document.getElementById('premiumProUserUID');
                        
                        if (premiumProUserEmailField) premiumProUserEmailField.value = currentUser.email;
                        if (premiumProUserUIDField) premiumProUserUIDField.value = currentUser.uid;
                    }
                    
                    // Show success message
                    showToast('Premium Pro purchase submitted successfully! You will receive your activation code via email after payment confirmation.', 'success');
                });
            }

            // Setup missed product form handlers
            setupMissedProductFormHandlers();
        }

        // ========================================
        // EVENT LISTENERS SETUP
        // ========================================
        function setupEventListeners() {
            // Close sidebar when clicking outside
            document.addEventListener('click', function(e) {
                const sidebar = document.getElementById('sidebar');
                const menuBtn = document.querySelector('.menu-btn');
                
                if (sidebar && menuBtn && !sidebar.contains(e.target) && !menuBtn.contains(e.target)) {
                    sidebar.classList.remove('active');
                }
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // ESC to close sidebar
                if (e.key === 'Escape') {
                    const sidebar = document.getElementById('sidebar');
                    if (sidebar) sidebar.classList.remove('active');
                }
            });

            // Handle image load errors
            document.addEventListener('error', function(e) {
                if (e.target.tagName === 'IMG') {
                    e.target.style.display = 'none';
                }
            }, true);
        }
    </script>
</body>
</html>